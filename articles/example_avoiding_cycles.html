<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>How to Avoid Using Cycles to Speed Up Model • WARDEN</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How to Avoid Using Cycles to Speed Up Model">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZEDNGW5QRP"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZEDNGW5QRP');
</script><!-- Google tag (gtag.js) -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">WARDEN</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html" aria-label="View Index"><span class="fa fa-home"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/warden_explained.html">Warden Explained</a></li>
    <li><a class="dropdown-item" href="../articles/example_ssd.html">Example in a Sick-Sicker-Dead Model</a></li>
    <li><a class="dropdown-item" href="../articles/inputs_selector.html">How to Use the Automatic Input Selector</a></li>
    <li><a class="dropdown-item" href="../articles/example_avoiding_cycles.html">How to Avoid Using Cycles to Speed Up Model</a></li>
    <li><a class="dropdown-item" href="../articles/example_ssd_stream.html">Example in a Sick-Sicker-Dead Model - Random Number Streams &amp; Luck Adjustment</a></li>
    <li><a class="dropdown-item" href="../articles/example_ssd_sobol.html">Example in a Sick-Sicker-Dead Model - Quasi-Random Sobol Sequence vs. Purely Random</a></li>
    <li><a class="dropdown-item" href="../articles/example_eBC.html">Example in Early Breast Cancer</a></li>
    <li><a class="dropdown-item" href="../articles/example_markov.html">Example in a Markov Model</a></li>
    <li><a class="dropdown-item" href="../articles/example_uncertainty.html">Structural and Parametric Uncertainty</a></li>
    <li><a class="dropdown-item" href="../articles/example_ipd.html">Example for Individual Patient Data</a></li>
    <li><a class="dropdown-item" href="../articles/example_colon_degeling.html">Degeling (2025) using WARDEN instead of simmer</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jsanchezalv/WARDEN" aria-label="View on Github"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="example_avoiding_cycles_files/kePrint-0.0.1/kePrint.js"></script><link href="example_avoiding_cycles_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>How to Avoid Using Cycles to Speed Up Model</h1>
                        <h4 data-toc-skip class="author">Javier Sanchez
Alvarez</h4>
            
            <h4 data-toc-skip class="date">July 04, 2025</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jsanchezalv/WARDEN/blob/main/vignettes/articles/example_avoiding_cycles.Rmd" class="external-link"><code>vignettes/articles/example_avoiding_cycles.Rmd</code></a></small>
      <div class="d-none name"><code>example_avoiding_cycles.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This document shows how one can substantially reduce running time in
models where cycle events are used by utilizing three features of
WARDEN: 1) per cycle costs and qalys, 2) time to event predictions which
take into account time-varying covariates through <code>qtimecov</code>
and 3) adjustment of ongoing outputs to be corrected by cycle-type of
adjustments (e.g., utility adjustment by age) through
<code>adj_val</code>.</p>
<p>30% speed gains can be expected, though the final impact depends on
the number of cycles and complexity at each cycle. Note that no function
has been implemented in C++, so if discounting, <code>qtimecov</code>
and <code>adj_val</code> are implemented in C++, substantial gains can
be expected.</p>
<p>Note as well that this approach to avoid cycles could smoothly handle
treatment waning, changes in covariates (like weight, BMI, etc),
etc.</p>
<div class="section level3">
<h3 id="main-options">Main options<a class="anchor" aria-label="anchor" href="#main-options"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jsanchezalv.github.io/WARDEN/">WARDEN</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/chjackson/flexsurv" class="external-link">flexsurv</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: survival</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'kableExtra'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:dplyr':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     group_rows</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>scipen <span class="op">=</span> <span class="fl">999</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>digits<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>tibble.print_max <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="model-using-cycles">Model using cycles<a class="anchor" aria-label="anchor" href="#model-using-cycles"></a>
</h2>
<p>This is a very simple model, where we just have a time to death given
by an exponential, but the underlying risk changes every year given by a
patient-specific time covariate. This means that in the traditional
approach, we would create yearly cycles to make the adjustments to the
time to event.</p>
<p>Additionally, we have a multiplicative utility age adjustment factor,
so at every yearly cycle we also adjust for that factor.</p>
<p>Treatment costs are yearly as well, so we add them as an
instantaneous cost at every cycle, including time 0. ## Inputs</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">common_all_inputs</span> <span class="op">&lt;-</span><span class="fu"><a href="../reference/add_item2.html">add_item2</a></span><span class="op">(</span>input <span class="op">=</span> <span class="op">{</span></span>
<span>  <span class="va">u_bs</span> <span class="op">&lt;-</span> <span class="fl">0.8</span></span>
<span>  <span class="va">u_age</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">0.5</span>, by <span class="op">=</span> <span class="fl">0.005</span><span class="op">)</span></span>
<span>  <span class="va">bs_rate</span> <span class="op">&lt;-</span> <span class="fl">0.07</span></span>
<span>  <span class="va">trt_eff</span> <span class="op">&lt;-</span> <span class="fl">0.02</span></span>
<span><span class="op">}</span><span class="op">)</span>  </span>
<span></span>
<span><span class="va">common_pt_inputs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_item2.html">add_item2</a></span><span class="op">(</span>input<span class="op">=</span><span class="op">{</span></span>
<span>    <span class="va">bs_age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">40</span>,<span class="fl">5</span><span class="op">)</span></span>
<span>    <span class="va">time_cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">/</span><span class="fl">500</span></span>
<span>    <span class="va">luck</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span> </span>
<span></span>
<span></span>
<span><span class="va">unique_pt_inputs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_item2.html">add_item2</a></span><span class="op">(</span>input <span class="op">=</span> <span class="op">{</span></span>
<span>    <span class="va">cost_trt_ins</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">arm</span><span class="op">==</span><span class="st">"int"</span>,<span class="fl">1000</span>,<span class="fl">500</span><span class="op">)</span></span>
<span>    <span class="va">bs_rate</span> <span class="op">&lt;-</span> <span class="va">bs_rate</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">arm</span><span class="op">==</span><span class="st">"int"</span>,<span class="va">trt_eff</span>,<span class="fl">0</span><span class="op">)</span></span>
<span>    <span class="va">bs_rate_f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">.time</span><span class="op">)</span><span class="op">{</span><span class="va">bs_rate</span> <span class="op">+</span> <span class="op">(</span><span class="va">time_cov</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="va">.time</span><span class="op">)</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">init_event_list</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/add_tte.html">add_tte</a></span><span class="op">(</span>arm<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"int"</span>,<span class="st">"noint"</span><span class="op">)</span>, evts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"start"</span>,<span class="st">"cycle"</span>,<span class="st">"death"</span><span class="op">)</span> ,input<span class="op">=</span><span class="op">{</span></span>
<span>    <span class="va">start</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">cycle</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>    <span class="va">death</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/qcond_exp.html">qcond_exp</a></span><span class="op">(</span><span class="va">luck</span>, rate <span class="op">=</span> <span class="va">bs_rate</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="va">evt_react_list</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/add_reactevt.html">add_reactevt</a></span><span class="op">(</span>name_evt <span class="op">=</span> <span class="st">"start"</span>,</span>
<span>               input <span class="op">=</span> <span class="op">{</span></span>
<span>                 <span class="va">new_rate</span> <span class="op">&lt;-</span> <span class="va">bs_rate</span></span>
<span>                 <span class="va">q_default</span> <span class="op">&lt;-</span> <span class="va">u_bs</span> <span class="op">*</span> <span class="va">u_age</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fl">100</span>,<span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="va">curtime</span> <span class="op">+</span> <span class="va">bs_age</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span>                 <span class="va">cost_trt</span> <span class="op">&lt;-</span> <span class="va">cost_trt_ins</span></span>
<span>               <span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_reactevt.html">add_reactevt</a></span><span class="op">(</span>name_evt <span class="op">=</span> <span class="st">"cycle"</span>,</span>
<span>               input <span class="op">=</span> <span class="op">{</span></span>
<span>                 <span class="co"># if(curtime &gt;= 100 - bs_age){</span></span>
<span>                 <span class="co">#   curtime &lt;- Inf</span></span>
<span>                 <span class="co"># }</span></span>
<span>              </span>
<span>              <span class="fu"><a href="../reference/new_event.html">new_event</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cycle <span class="op">=</span> <span class="va">curtime</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span>                 </span>
<span>              <span class="va">q_default</span> <span class="op">&lt;-</span> <span class="va">u_bs</span> <span class="op">*</span> <span class="va">u_age</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fl">100</span>,<span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="va">curtime</span> <span class="op">+</span> <span class="va">bs_age</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span>              <span class="kw">if</span><span class="op">(</span><span class="va">curtime</span><span class="op">&lt;</span><span class="fl">5</span><span class="op">)</span><span class="op">{</span></span>
<span>              <span class="va">cost_trt</span> <span class="op">&lt;-</span> <span class="va">cost_trt_ins</span></span>
<span>              <span class="op">}</span></span>
<span>              </span>
<span>              <span class="va">old_rate</span> <span class="op">&lt;-</span> <span class="va">new_rate</span></span>
<span>              <span class="va">new_rate</span> <span class="op">&lt;-</span> <span class="fu">bs_rate_f</span><span class="op">(</span><span class="va">curtime</span><span class="op">)</span></span>
<span>              <span class="va">prev_surv</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html" class="external-link">pexp</a></span><span class="op">(</span><span class="va">curtime</span> <span class="op">-</span> <span class="fl">1</span>, <span class="va">old_rate</span><span class="op">)</span></span>
<span>              <span class="va">cur_surv</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html" class="external-link">pexp</a></span><span class="op">(</span><span class="va">curtime</span>, <span class="va">old_rate</span><span class="op">)</span></span>
<span>              </span>
<span>              <span class="va">luck</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/luck_adj.html">luck_adj</a></span><span class="op">(</span>prevsurv <span class="op">=</span> <span class="va">prev_surv</span>, cursurv <span class="op">=</span> <span class="va">cur_surv</span>, luck <span class="op">=</span> <span class="va">luck</span>, condq <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>              <span class="va">ttdeath</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/qcond_exp.html">qcond_exp</a></span><span class="op">(</span><span class="va">luck</span>, rate <span class="op">=</span> <span class="va">new_rate</span><span class="op">)</span> <span class="op">+</span> <span class="va">curtime</span></span>
<span>              <span class="fu"><a href="../reference/modify_event.html">modify_event</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>death <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">curtime</span>, <span class="va">ttdeath</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>               <span class="op">}</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_reactevt.html">add_reactevt</a></span><span class="op">(</span>name_evt <span class="op">=</span> <span class="st">"death"</span>,</span>
<span>               input <span class="op">=</span> <span class="op">{</span></span>
<span>                 <span class="va">curtime</span> <span class="op">&lt;-</span> <span class="cn">Inf</span></span>
<span>               <span class="op">}</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">util_ongoing</span> <span class="op">&lt;-</span> <span class="st">"q_default"</span></span>
<span></span>
<span><span class="va">cost_instant</span> <span class="op">&lt;-</span> <span class="st">"cost_trt"</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_sim.html">run_sim</a></span><span class="op">(</span>  </span>
<span>  npats<span class="op">=</span><span class="fl">5000</span>,                               </span>
<span>  n_sim<span class="op">=</span><span class="fl">1</span>,                                  </span>
<span>  psa_bool <span class="op">=</span> <span class="cn">FALSE</span>,                         </span>
<span>  arm_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"int"</span>, <span class="st">"noint"</span><span class="op">)</span>,             </span>
<span>  common_all_inputs <span class="op">=</span> <span class="va">common_all_inputs</span>,   </span>
<span>  common_pt_inputs <span class="op">=</span> <span class="va">common_pt_inputs</span>,      </span>
<span>  unique_pt_inputs <span class="op">=</span> <span class="va">unique_pt_inputs</span>,</span>
<span>  init_event_list <span class="op">=</span> <span class="va">init_event_list</span>,        </span>
<span>  evt_react_list <span class="op">=</span> <span class="va">evt_react_list</span>,          </span>
<span>  util_ongoing_list <span class="op">=</span> <span class="va">util_ongoing</span>,</span>
<span>  cost_instant_list <span class="op">=</span> <span class="va">cost_instant</span>,</span>
<span>  ipd <span class="op">=</span> <span class="fl">2</span>, input_out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"luck"</span>,<span class="st">"time_cov"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Analysis number: 1</span></span>
<span><span class="co">#&gt; Simulation number: 1</span></span>
<span><span class="co">#&gt; Patient-arm data aggregated across events by selecting the last value for input_out items.</span></span>
<span><span class="co">#&gt; Time to run simulation 1: 13.01s</span></span>
<span><span class="co">#&gt; Time to run analysis 1: 13.01s</span></span>
<span><span class="co">#&gt; Total time to run: 13.02s</span></span></code></pre></div>
<div class="section level3">
<h3 id="summary-of-results">Summary of Results<a class="anchor" aria-label="anchor" href="#summary-of-results"></a>
</h3>
<pre><code><span><span class="co">#&gt;                       int    noint</span></span>
<span><span class="co">#&gt; costs             4298.77  2073.04</span></span>
<span><span class="co">#&gt; dcosts               0.00  2225.73</span></span>
<span><span class="co">#&gt; lys                 11.33     9.37</span></span>
<span><span class="co">#&gt; dlys                 0.00     1.97</span></span>
<span><span class="co">#&gt; qalys                6.87     5.74</span></span>
<span><span class="co">#&gt; dqalys               0.00     1.13</span></span>
<span><span class="co">#&gt; ICER                   NA  1131.35</span></span>
<span><span class="co">#&gt; ICUR                   NA  1967.28</span></span>
<span><span class="co">#&gt; INMB                   NA 54342.95</span></span>
<span><span class="co">#&gt; costs_undisc      4543.20  2188.30</span></span>
<span><span class="co">#&gt; dcosts_undisc        0.00  2354.90</span></span>
<span><span class="co">#&gt; lys_undisc          16.26    12.60</span></span>
<span><span class="co">#&gt; dlys_undisc          0.00     3.65</span></span>
<span><span class="co">#&gt; qalys_undisc         9.61     7.59</span></span>
<span><span class="co">#&gt; dqalys_undisc        0.00     2.02</span></span>
<span><span class="co">#&gt; ICER_undisc            NA   644.35</span></span>
<span><span class="co">#&gt; ICUR_undisc            NA  1165.15</span></span>
<span><span class="co">#&gt; INMB_undisc            NA 98700.85</span></span>
<span><span class="co">#&gt; cost_trt          4298.77  2073.04</span></span>
<span><span class="co">#&gt; dcost_trt            0.00  2225.73</span></span>
<span><span class="co">#&gt; cost_trt_undisc   4543.20  2188.30</span></span>
<span><span class="co">#&gt; dcost_trt_undisc     0.00  2354.90</span></span>
<span><span class="co">#&gt; luck                 0.03     0.04</span></span>
<span><span class="co">#&gt; dluck                0.00    -0.01</span></span>
<span><span class="co">#&gt; q_default            6.87     5.74</span></span>
<span><span class="co">#&gt; dq_default           0.00     1.13</span></span>
<span><span class="co">#&gt; q_default_undisc     9.61     7.59</span></span>
<span><span class="co">#&gt; dq_default_undisc    0.00     2.02</span></span>
<span><span class="co">#&gt; time_cov             0.00     0.00</span></span>
<span><span class="co">#&gt; dtime_cov            0.00     0.00</span></span></code></pre>
<table class="table table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
pat_id
</th>
<th style="text-align:left;">
arm
</th>
<th style="text-align:right;">
total_lys
</th>
<th style="text-align:right;">
total_qalys
</th>
<th style="text-align:right;">
total_costs
</th>
<th style="text-align:right;">
total_lys_undisc
</th>
<th style="text-align:right;">
total_qalys_undisc
</th>
<th style="text-align:right;">
total_costs_undisc
</th>
<th style="text-align:right;">
cost_trt
</th>
<th style="text-align:right;">
q_default
</th>
<th style="text-align:right;">
q_default_undisc
</th>
<th style="text-align:right;">
cost_trt_undisc
</th>
<th style="text-align:right;">
nexttime
</th>
<th style="text-align:right;">
number_events
</th>
<th style="text-align:right;">
luck
</th>
<th style="text-align:right;">
time_cov
</th>
<th style="text-align:right;">
simulation
</th>
<th style="text-align:right;">
sensitivity
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
int
</td>
<td style="text-align:right;">
8.73
</td>
<td style="text-align:right;">
5.44
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
10.10
</td>
<td style="text-align:right;">
6.28
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
5.44
</td>
<td style="text-align:right;">
6.28
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
75.2
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
0.005
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
noint
</td>
<td style="text-align:right;">
6.56
</td>
<td style="text-align:right;">
4.12
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
7.29
</td>
<td style="text-align:right;">
4.57
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
4.12
</td>
<td style="text-align:right;">
4.57
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
42.6
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0.020
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
int
</td>
<td style="text-align:right;">
17.85
</td>
<td style="text-align:right;">
11.09
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
25.37
</td>
<td style="text-align:right;">
15.61
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
11.09
</td>
<td style="text-align:right;">
15.61
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
375.7
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
0.020
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
noint
</td>
<td style="text-align:right;">
14.28
</td>
<td style="text-align:right;">
9.03
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
18.55
</td>
<td style="text-align:right;">
11.66
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
9.03
</td>
<td style="text-align:right;">
11.66
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
208.1
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0.040
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
int
</td>
<td style="text-align:right;">
4.74
</td>
<td style="text-align:right;">
2.98
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
5.11
</td>
<td style="text-align:right;">
3.21
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
2.98
</td>
<td style="text-align:right;">
3.21
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
25.2
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0.006
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
noint
</td>
<td style="text-align:right;">
3.47
</td>
<td style="text-align:right;">
2.19
</td>
<td style="text-align:right;">
1914
</td>
<td style="text-align:right;">
3.66
</td>
<td style="text-align:right;">
2.31
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
1914
</td>
<td style="text-align:right;">
2.19
</td>
<td style="text-align:right;">
2.31
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
13.3
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.045
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
int
</td>
<td style="text-align:right;">
12.88
</td>
<td style="text-align:right;">
8.09
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
16.21
</td>
<td style="text-align:right;">
10.14
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
8.09
</td>
<td style="text-align:right;">
10.14
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
168.4
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
0.011
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
noint
</td>
<td style="text-align:right;">
9.85
</td>
<td style="text-align:right;">
6.27
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
11.64
</td>
<td style="text-align:right;">
7.39
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
6.27
</td>
<td style="text-align:right;">
7.39
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
89.3
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
0.045
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
int
</td>
<td style="text-align:right;">
20.75
</td>
<td style="text-align:right;">
11.95
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
32.15
</td>
<td style="text-align:right;">
18.19
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
11.95
</td>
<td style="text-align:right;">
18.19
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
592.3
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
0.012
</td>
<td style="text-align:right;">
0.001
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
noint
</td>
<td style="text-align:right;">
17.94
</td>
<td style="text-align:right;">
10.50
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
25.56
</td>
<td style="text-align:right;">
14.79
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
10.50
</td>
<td style="text-align:right;">
14.79
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
376.1
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
0.051
</td>
<td style="text-align:right;">
0.001
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="model-avoiding-cycles">Model avoiding cycles<a class="anchor" aria-label="anchor" href="#model-avoiding-cycles"></a>
</h2>
<p>We now avoid to use cycles.</p>
<p>To fix the time to death with time varying covariates, we use
<code>timecov</code> with yearly updates (<code>dt = 1</code>) and
passing the parameter as a function of time, so the function
automatically iterates over each year to obtain the relevant time to
event. This means we can obtain the final time to event in one go at
start. While still iterative, it’s less time consuming than having
events created at every year.</p>
<p>The multiplicative utility age adjustment factor is implemented by
<code>adj_val</code>, a function that given an expression that changes
with time, reweighs the evaluated values by the ongoing discounting
factor that would apply so that even if a single value is returned, the
discounted outcome will still be the same as in the traditional cycle
approach. Note however that undiscounted outcomes will not be correct
(in this case we do not care about it, but we could just create another
value like <code>other_q_default</code> where the <code>adj_val</code>
is used with 0 discounting, and that value will be correct
undiscounted).</p>
<p>Treatment costs are yearly, so we just use the per cycle approach
instead of instantaneous costs at every year. ## Inputs</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">common_all_inputs</span> <span class="op">&lt;-</span><span class="fu"><a href="../reference/add_item2.html">add_item2</a></span><span class="op">(</span>input <span class="op">=</span> <span class="op">{</span></span>
<span>  <span class="va">u_bs</span> <span class="op">&lt;-</span> <span class="fl">0.8</span></span>
<span>  <span class="va">u_age</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">0.5</span>, by <span class="op">=</span> <span class="fl">0.005</span><span class="op">)</span></span>
<span>  <span class="va">bs_rate</span> <span class="op">&lt;-</span> <span class="fl">0.07</span></span>
<span>  <span class="va">trt_eff</span> <span class="op">&lt;-</span> <span class="fl">0.02</span></span>
<span>  </span>
<span>  <span class="co">#set costs as cycle</span></span>
<span>  <span class="va">cost_trt_cycle_l</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="va">cost_trt_cycle_starttime</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>  <span class="va">cost_trt_max_cycles</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="op">}</span><span class="op">)</span>  </span>
<span></span>
<span><span class="va">common_pt_inputs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_item2.html">add_item2</a></span><span class="op">(</span>input<span class="op">=</span><span class="op">{</span></span>
<span>    <span class="va">bs_age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">40</span>,<span class="fl">5</span><span class="op">)</span></span>
<span>    <span class="va">time_cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">/</span><span class="fl">500</span></span>
<span>    <span class="va">luck</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span> </span>
<span></span>
<span></span>
<span><span class="va">unique_pt_inputs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_item2.html">add_item2</a></span><span class="op">(</span>input <span class="op">=</span> <span class="op">{</span></span>
<span>    <span class="va">cost_trt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">arm</span><span class="op">==</span><span class="st">"int"</span>,<span class="fl">1000</span>,<span class="fl">500</span><span class="op">)</span></span>
<span>    <span class="va">bs_rate</span> <span class="op">&lt;-</span> <span class="va">bs_rate</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">arm</span><span class="op">==</span><span class="st">"int"</span>,<span class="va">trt_eff</span>,<span class="fl">0</span><span class="op">)</span></span>
<span>    <span class="co">#rate is a function of time, with yearly changes</span></span>
<span>    <span class="va">bs_rate_f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">.time</span><span class="op">)</span><span class="op">{</span><span class="va">bs_rate</span> <span class="op">+</span> <span class="op">(</span><span class="va">time_cov</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="va">.time</span><span class="op">)</span><span class="op">)</span><span class="op">}</span></span>
<span>   </span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">init_event_list</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/add_tte.html">add_tte</a></span><span class="op">(</span>arm<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"int"</span>,<span class="st">"noint"</span><span class="op">)</span>, evts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"start"</span>,<span class="st">"death"</span><span class="op">)</span> ,input<span class="op">=</span><span class="op">{</span></span>
<span>    <span class="va">start</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="co">#we can immediately know what the final TTE will be even with time changing covariates</span></span>
<span>    <span class="va">death</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/qtimecov.html">qtimecov</a></span><span class="op">(</span>luck <span class="op">=</span> <span class="va">luck</span>,a_fun <span class="op">=</span> <span class="va">bs_rate_f</span>,dist <span class="op">=</span> <span class="st">"exp"</span>, dt <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="va">evt_react_list</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/add_reactevt.html">add_reactevt</a></span><span class="op">(</span>name_evt <span class="op">=</span> <span class="st">"start"</span>,</span>
<span>               input <span class="op">=</span> <span class="op">{</span></span>
<span>                 <span class="va">new_rate</span> <span class="op">&lt;-</span> <span class="va">bs_rate</span></span>
<span>                 <span class="co">#this is the way to obtain utility adjustment by age as a single value, it reweighs the u_age by their discounting value so final discounted outcomes are correct</span></span>
<span>                 <span class="va">adj_factor</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adj_val.html">adj_val</a></span><span class="op">(</span></span>
<span>                   <span class="va">curtime</span>,</span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">cur_evtlist</span><span class="op">)</span>,</span>
<span>                   by <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                   <span class="va">u_age</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fl">100</span>,<span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="va">.time</span> <span class="op">+</span> <span class="va">bs_age</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>,</span>
<span>                   discount <span class="op">=</span> <span class="va">drq</span></span>
<span>                   <span class="op">)</span></span>
<span>                 <span class="va">q_default</span> <span class="op">&lt;-</span> <span class="va">u_bs</span> <span class="op">*</span> <span class="va">adj_factor</span></span>
<span>               <span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_reactevt.html">add_reactevt</a></span><span class="op">(</span>name_evt <span class="op">=</span> <span class="st">"death"</span>,</span>
<span>               input <span class="op">=</span> <span class="op">{</span></span>
<span>                 <span class="va">curtime</span> <span class="op">&lt;-</span> <span class="cn">Inf</span></span>
<span>               <span class="op">}</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">util_ongoing</span> <span class="op">&lt;-</span> <span class="st">"q_default"</span></span>
<span></span>
<span><span class="va">cost_cycle</span> <span class="op">&lt;-</span> <span class="st">"cost_trt"</span></span>
<span></span>
<span><span class="va">results2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_sim.html">run_sim</a></span><span class="op">(</span>  </span>
<span>  npats<span class="op">=</span><span class="fl">5000</span>,                               </span>
<span>  n_sim<span class="op">=</span><span class="fl">1</span>,                                  </span>
<span>  psa_bool <span class="op">=</span> <span class="cn">FALSE</span>,                         </span>
<span>  arm_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"int"</span>, <span class="st">"noint"</span><span class="op">)</span>,             </span>
<span>  common_all_inputs <span class="op">=</span> <span class="va">common_all_inputs</span>,   </span>
<span>  common_pt_inputs <span class="op">=</span> <span class="va">common_pt_inputs</span>,      </span>
<span>  unique_pt_inputs <span class="op">=</span> <span class="va">unique_pt_inputs</span>,</span>
<span>  init_event_list <span class="op">=</span> <span class="va">init_event_list</span>,        </span>
<span>  evt_react_list <span class="op">=</span> <span class="va">evt_react_list</span>,          </span>
<span>  util_ongoing_list <span class="op">=</span> <span class="va">util_ongoing</span>,</span>
<span>  cost_cycle_list <span class="op">=</span> <span class="va">cost_cycle</span>,</span>
<span>  ipd <span class="op">=</span> <span class="fl">2</span>, input_out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"luck"</span>,<span class="st">"time_cov"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Analysis number: 1</span></span>
<span><span class="co">#&gt; Simulation number: 1</span></span>
<span><span class="co">#&gt; Patient-arm data aggregated across events by selecting the last value for input_out items.</span></span>
<span><span class="co">#&gt; Time to run simulation 1: 5.1s</span></span>
<span><span class="co">#&gt; Time to run analysis 1: 5.1s</span></span>
<span><span class="co">#&gt; Total time to run: 5.1s</span></span></code></pre></div>
<div class="section level3">
<h3 id="summary-of-results-1">Summary of Results<a class="anchor" aria-label="anchor" href="#summary-of-results-1"></a>
</h3>
<pre><code><span><span class="co">#&gt;                               int     noint</span></span>
<span><span class="co">#&gt; costs                     4298.77   2073.04</span></span>
<span><span class="co">#&gt; dcosts                       0.00   2225.73</span></span>
<span><span class="co">#&gt; lys                         11.33      9.37</span></span>
<span><span class="co">#&gt; dlys                         0.00      1.97</span></span>
<span><span class="co">#&gt; qalys                        6.87      5.74</span></span>
<span><span class="co">#&gt; dqalys                       0.00      1.13</span></span>
<span><span class="co">#&gt; ICER                           NA   1131.41</span></span>
<span><span class="co">#&gt; ICUR                           NA   1967.36</span></span>
<span><span class="co">#&gt; INMB                           NA  54340.61</span></span>
<span><span class="co">#&gt; costs_undisc              4543.20   2188.30</span></span>
<span><span class="co">#&gt; dcosts_undisc                0.00   2354.90</span></span>
<span><span class="co">#&gt; lys_undisc                  16.26     12.60</span></span>
<span><span class="co">#&gt; dlys_undisc                  0.00      3.65</span></span>
<span><span class="co">#&gt; qalys_undisc                 9.78      7.68</span></span>
<span><span class="co">#&gt; dqalys_undisc                0.00      2.10</span></span>
<span><span class="co">#&gt; ICER_undisc                    NA    644.82</span></span>
<span><span class="co">#&gt; ICUR_undisc                    NA   1120.59</span></span>
<span><span class="co">#&gt; INMB_undisc                    NA 102719.09</span></span>
<span><span class="co">#&gt; cost_trt                  4298.77   2073.04</span></span>
<span><span class="co">#&gt; dcost_trt                    0.00   2225.73</span></span>
<span><span class="co">#&gt; cost_trt_cycle_l             2.00      2.00</span></span>
<span><span class="co">#&gt; dcost_trt_cycle_l            0.00      0.00</span></span>
<span><span class="co">#&gt; cost_trt_cycle_starttime     0.00      0.00</span></span>
<span><span class="co">#&gt; dcost_trt_cycle_starttime    0.00      0.00</span></span>
<span><span class="co">#&gt; cost_trt_max_cycles         10.00     10.00</span></span>
<span><span class="co">#&gt; dcost_trt_max_cycles         0.00      0.00</span></span>
<span><span class="co">#&gt; cost_trt_undisc           4543.20   2188.30</span></span>
<span><span class="co">#&gt; dcost_trt_undisc             0.00   2354.90</span></span>
<span><span class="co">#&gt; luck                         0.50      0.50</span></span>
<span><span class="co">#&gt; dluck                        0.00      0.00</span></span>
<span><span class="co">#&gt; q_default                    6.87      5.74</span></span>
<span><span class="co">#&gt; dq_default                   0.00      1.13</span></span>
<span><span class="co">#&gt; q_default_undisc             9.78      7.68</span></span>
<span><span class="co">#&gt; dq_default_undisc            0.00      2.10</span></span>
<span><span class="co">#&gt; time_cov                     0.00      0.00</span></span>
<span><span class="co">#&gt; dtime_cov                    0.00      0.00</span></span></code></pre>
<table class="table table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
pat_id
</th>
<th style="text-align:left;">
arm
</th>
<th style="text-align:right;">
total_lys
</th>
<th style="text-align:right;">
total_qalys
</th>
<th style="text-align:right;">
total_costs
</th>
<th style="text-align:right;">
total_lys_undisc
</th>
<th style="text-align:right;">
total_qalys_undisc
</th>
<th style="text-align:right;">
total_costs_undisc
</th>
<th style="text-align:right;">
cost_trt
</th>
<th style="text-align:right;">
cost_trt_cycle_l
</th>
<th style="text-align:right;">
cost_trt_cycle_starttime
</th>
<th style="text-align:right;">
cost_trt_max_cycles
</th>
<th style="text-align:right;">
q_default
</th>
<th style="text-align:right;">
q_default_undisc
</th>
<th style="text-align:right;">
cost_trt_undisc
</th>
<th style="text-align:right;">
nexttime
</th>
<th style="text-align:right;">
number_events
</th>
<th style="text-align:right;">
luck
</th>
<th style="text-align:right;">
time_cov
</th>
<th style="text-align:right;">
simulation
</th>
<th style="text-align:right;">
sensitivity
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
int
</td>
<td style="text-align:right;">
8.73
</td>
<td style="text-align:right;">
5.44
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
10.10
</td>
<td style="text-align:right;">
6.29
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
5.44
</td>
<td style="text-align:right;">
6.29
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
20.20
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.403
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
noint
</td>
<td style="text-align:right;">
6.56
</td>
<td style="text-align:right;">
4.12
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
7.29
</td>
<td style="text-align:right;">
4.58
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
4.12
</td>
<td style="text-align:right;">
4.58
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
14.57
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.403
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
int
</td>
<td style="text-align:right;">
17.85
</td>
<td style="text-align:right;">
11.09
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
25.37
</td>
<td style="text-align:right;">
15.77
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
11.09
</td>
<td style="text-align:right;">
15.77
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
50.74
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.736
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
noint
</td>
<td style="text-align:right;">
14.28
</td>
<td style="text-align:right;">
9.03
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
18.55
</td>
<td style="text-align:right;">
11.73
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
9.03
</td>
<td style="text-align:right;">
11.73
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
37.10
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.736
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
int
</td>
<td style="text-align:right;">
4.74
</td>
<td style="text-align:right;">
2.98
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
5.11
</td>
<td style="text-align:right;">
3.21
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
2.98
</td>
<td style="text-align:right;">
3.21
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
10.22
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.226
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
noint
</td>
<td style="text-align:right;">
3.47
</td>
<td style="text-align:right;">
2.19
</td>
<td style="text-align:right;">
1914
</td>
<td style="text-align:right;">
3.66
</td>
<td style="text-align:right;">
2.31
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
1914
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
2.19
</td>
<td style="text-align:right;">
2.31
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
7.32
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.226
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
int
</td>
<td style="text-align:right;">
12.88
</td>
<td style="text-align:right;">
8.09
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
16.21
</td>
<td style="text-align:right;">
10.18
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
8.09
</td>
<td style="text-align:right;">
10.18
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
32.41
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.560
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
noint
</td>
<td style="text-align:right;">
9.85
</td>
<td style="text-align:right;">
6.27
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
11.64
</td>
<td style="text-align:right;">
7.41
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
6.27
</td>
<td style="text-align:right;">
7.41
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
23.29
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.560
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
int
</td>
<td style="text-align:right;">
20.75
</td>
<td style="text-align:right;">
11.95
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
32.15
</td>
<td style="text-align:right;">
18.51
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
4717
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
11.95
</td>
<td style="text-align:right;">
18.51
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
64.31
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.877
</td>
<td style="text-align:right;">
0.001
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
noint
</td>
<td style="text-align:right;">
17.94
</td>
<td style="text-align:right;">
10.50
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
25.56
</td>
<td style="text-align:right;">
14.96
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
2359
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
10.50
</td>
<td style="text-align:right;">
14.96
</td>
<td style="text-align:right;">
2500
</td>
<td style="text-align:right;">
51.12
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.877
</td>
<td style="text-align:right;">
0.001
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Javier Sanchez Alvarez.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
