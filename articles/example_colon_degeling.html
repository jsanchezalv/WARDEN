<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Degeling et al. (2025) using WARDEN instead of simmer • WARDEN</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Degeling et al. (2025) using WARDEN instead of simmer">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZEDNGW5QRP"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZEDNGW5QRP');
</script><!-- Google tag (gtag.js) -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">WARDEN</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html" aria-label="View Index"><span class="fa fa-home"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Basic Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/warden_explained.html">Warden Explained</a></li>
    <li><a class="dropdown-item" href="../articles/example_ssd.html">Sick-Sicker-Dead Model (SSD)</a></li>
    <li><a class="dropdown-item" href="../articles/example_ssd_constrained.html">Resource Constrained Sick-Sicker-Dead model</a></li>
    <li><a class="dropdown-item" href="../articles/inputs_selector.html">How to Use the Automatic Input Selector</a></li>
    <li><a class="dropdown-item" href="../articles/example_eBC.html">Early Breast Cancer</a></li>
    <li><a class="dropdown-item" href="../articles/example_ipd.html">Using Individual Patient Data</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other Tutorials and Tips</h6></li>
    <li><a class="dropdown-item" href="../articles/example_markov.html">Cohort Markov Model</a></li>
    <li><a class="dropdown-item" href="../articles/example_avoiding_cycles.html">How to Avoid Using Cycles to Speed Up Model</a></li>
    <li><a class="dropdown-item" href="../articles/example_uncertainty.html">Structural and Parametric Uncertainty</a></li>
    <li><a class="dropdown-item" href="../articles/example_ssd_stream.html">Random Number Streams &amp; Luck Adjustment (SSD model)</a></li>
    <li><a class="dropdown-item" href="../articles/example_ssd_sobol.html">Quasi-Random Sobol Sequence vs. Purely Random (SSD model)</a></li>
    <li><a class="dropdown-item" href="../articles/example_colon_degeling.html">Degeling (2025) using WARDEN instead of simmer</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jsanchezalv/WARDEN" aria-label="View on Github"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="example_colon_degeling_files/kePrint-0.0.1/kePrint.js"></script><link href="example_colon_degeling_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Degeling et al. (2025) using WARDEN instead of simmer</h1>
                        <h4 data-toc-skip class="author">Javier Sanchez
Alvarez</h4>
            
            <h4 data-toc-skip class="date">October 08, 2025</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jsanchezalv/WARDEN/blob/main/vignettes/articles/example_colon_degeling.Rmd" class="external-link"><code>vignettes/articles/example_colon_degeling.Rmd</code></a></small>
      <div class="d-none name"><code>example_colon_degeling.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This document makes use of the code provided by <a href="https://link.springer.com/article/10.1007/s40258-025-00983-8" class="external-link">Degeling
et al. (2025)</a> which use simmer in their original approach, to
showcase how the same model would be written with WARDEN instead of
using simmer, reflecting on the advantages and disadvantages of each
approach.</p>
<p>Note that the model used is not resource constrained, so in WARDEN we
would use with the <code>constrained = FALSE</code> argument (which is
FALSE by default). We will then see an alternative approach that could
have been taken in the model design to simplify the code and reduce the
number of events defined.</p>
<p>In this document I have made a few modifications to ensure the random
numbers used are cloned for a patient across arms, that way we should be
able to reduce the number of simulations needed to achieve
convergence.</p>
<div class="section level3">
<h3 id="main-options">Main options<a class="anchor" aria-label="anchor" href="#main-options"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jsanchezalv.github.io/WARDEN/">WARDEN</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/chjackson/flexsurv" class="external-link">flexsurv</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: survival</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'kableExtra'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:dplyr':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     group_rows</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">rllogiscure</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span> <span class="op">=</span> <span class="fl">1</span>, <span class="va">cure</span>, <span class="va">shape</span>, <span class="va">scale</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">&lt;</span> <span class="va">cure</span>, <span class="cn">Inf</span>, <span class="fu">flexsurv</span><span class="fu">::</span><span class="fu"><a href="http://chjackson.github.io/flexsurv-dev/reference/Llogis.html" class="external-link">rllogis</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n</span>, shape <span class="op">=</span> <span class="va">shape</span>, scale <span class="op">=</span> <span class="va">scale</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">qllogiscure</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">q1</span><span class="op">=</span><span class="fl">0.5</span>,<span class="va">q2</span><span class="op">=</span><span class="fl">0.5</span>, <span class="va">cure</span>, <span class="va">shape</span>, <span class="va">scale</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">q1</span> <span class="op">&lt;</span> <span class="va">cure</span>, <span class="cn">Inf</span>, <span class="fu">flexsurv</span><span class="fu">::</span><span class="fu"><a href="http://chjackson.github.io/flexsurv-dev/reference/Llogis.html" class="external-link">qllogis</a></span><span class="op">(</span><span class="va">q2</span>, shape <span class="op">=</span> <span class="va">shape</span>, scale <span class="op">=</span> <span class="va">scale</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Load the data directly</span></span>
<span></span>
<span><span class="va">df_survival_models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  d_RF_R_1_low_dist <span class="op">=</span> <span class="st">"llogis cure"</span>,</span>
<span>  d_RF_R_1_low_cure <span class="op">=</span> <span class="fl">0.488186991523229</span>,</span>
<span>  d_RF_R_1_low_shape <span class="op">=</span> <span class="fl">1.77977114896326</span>,</span>
<span>  d_RF_R_1_low_scale <span class="op">=</span> <span class="fl">1.38283630454774</span>,</span>
<span>  d_RF_R_1_high_dist <span class="op">=</span> <span class="st">"llogis cure"</span>,</span>
<span>  d_RF_R_1_high_cure <span class="op">=</span> <span class="fl">0.214810267441731</span>,</span>
<span>  d_RF_R_1_high_shape <span class="op">=</span> <span class="fl">1.77977114896326</span>,</span>
<span>  d_RF_R_1_high_scale <span class="op">=</span> <span class="fl">0.789492793640768</span>,</span>
<span>  d_RF_R_2_low_dist <span class="op">=</span> <span class="st">"llogis cure"</span>,</span>
<span>  d_RF_R_2_low_cure <span class="op">=</span> <span class="fl">0.65641085001312</span>,</span>
<span>  d_RF_R_2_low_shape <span class="op">=</span> <span class="fl">1.77977114896326</span>,</span>
<span>  d_RF_R_2_low_scale <span class="op">=</span> <span class="fl">1.58521155099032</span>,</span>
<span>  d_RF_R_2_high_dist <span class="op">=</span> <span class="st">"llogis cure"</span>,</span>
<span>  d_RF_R_2_high_cure <span class="op">=</span> <span class="fl">0.353984786085761</span>,</span>
<span>  d_RF_R_2_high_shape <span class="op">=</span> <span class="fl">1.77977114896326</span>,</span>
<span>  d_RF_R_2_high_scale <span class="op">=</span> <span class="fl">0.905033438728147</span>,</span>
<span>  d_RF_D_dist <span class="op">=</span> <span class="st">"gompertz"</span>,</span>
<span>  d_RF_D_shape <span class="op">=</span> <span class="fl">0.100559042221505</span>,</span>
<span>  d_RF_D_rate <span class="op">=</span> <span class="fl">0.00665743407339234</span>,</span>
<span>  d_R_D_1_dist <span class="op">=</span> <span class="st">"llogis"</span>,</span>
<span>  d_R_D_1_shape <span class="op">=</span> <span class="fl">1.485045044099</span>,</span>
<span>  d_R_D_1_scale <span class="op">=</span> <span class="fl">1.00935168932233</span>,</span>
<span>  d_R_D_2_dist <span class="op">=</span> <span class="st">"llogis"</span>,</span>
<span>  d_R_D_2_shape <span class="op">=</span> <span class="fl">1.44829250447263</span>,</span>
<span>  d_R_D_2_scale <span class="op">=</span> <span class="fl">0.810984232666931</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit_RF_R</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit_RF_R</span><span class="op">$</span><span class="va">coefficients</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>theta <span class="op">=</span> <span class="op">-</span><span class="fl">0.0472608287028634</span>, shape <span class="op">=</span> <span class="fl">0.576484788040251</span>, scale <span class="op">=</span> <span class="fl">0.324136683094238</span>, </span>
<span>`rxLev+5FU` <span class="op">=</span> <span class="fl">0.694601105199585</span>, node4 <span class="op">=</span> <span class="op">-</span><span class="fl">1.24890939590147</span>, `scale(rxLev+5FU)` <span class="op">=</span> <span class="fl">0.136581185984944</span>, </span>
<span>`scale(node4)` <span class="op">=</span> <span class="op">-</span><span class="fl">0.560501256173105</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit_RF_R</span><span class="op">$</span><span class="va">cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.0196583147504792</span>, <span class="fl">0.00156218752250396</span>, <span class="op">-</span><span class="fl">0.00257474768797604</span>, </span>
<span><span class="op">-</span><span class="fl">0.016302156542927</span>, <span class="op">-</span><span class="fl">0.0100195566305646</span>, <span class="fl">0.00134971798565362</span>, </span>
<span><span class="fl">0.00170701620954217</span>, <span class="fl">0.00156218752250396</span>, <span class="fl">0.00365083117648361</span>, </span>
<span><span class="op">-</span><span class="fl">0.00128500487043069</span>, <span class="op">-</span><span class="fl">0.000244113496363589</span>, <span class="fl">2.02965101911069e-05</span>, </span>
<span><span class="op">-</span><span class="fl">0.000143663350415706</span>, <span class="fl">0.000680998903126475</span>, <span class="op">-</span><span class="fl">0.00257474768797604</span>, </span>
<span><span class="op">-</span><span class="fl">0.00128500487043069</span>, <span class="fl">0.0092867442776243</span>, <span class="fl">0.00151695259640943</span>, </span>
<span><span class="fl">0.00133526552969664</span>, <span class="op">-</span><span class="fl">0.00625680296067579</span>, <span class="op">-</span><span class="fl">0.00661478811857714</span>, </span>
<span><span class="op">-</span><span class="fl">0.016302156542927</span>, <span class="op">-</span><span class="fl">0.000244113496363589</span>, <span class="fl">0.00151695259640943</span>, </span>
<span><span class="fl">0.0338463064763289</span>, <span class="op">-</span><span class="fl">0.0025154671522777</span>, <span class="op">-</span><span class="fl">0.00322763710020272</span>, </span>
<span><span class="op">-</span><span class="fl">9.12647224737586e-05</span>, <span class="op">-</span><span class="fl">0.0100195566305646</span>, <span class="fl">2.02965101911069e-05</span>, </span>
<span><span class="fl">0.00133526552969664</span>, <span class="op">-</span><span class="fl">0.0025154671522777</span>, <span class="fl">0.0454732545912484</span>, </span>
<span><span class="fl">0.00012107663391756</span>, <span class="op">-</span><span class="fl">0.00307943086438432</span>, <span class="fl">0.00134971798565362</span>, </span>
<span><span class="op">-</span><span class="fl">0.000143663350415706</span>, <span class="op">-</span><span class="fl">0.00625680296067579</span>, <span class="op">-</span><span class="fl">0.00322763710020272</span>, </span>
<span><span class="fl">0.00012107663391756</span>, <span class="fl">0.0148872736561986</span>, <span class="fl">0.000478467611046574</span>, </span>
<span><span class="fl">0.00170701620954217</span>, <span class="fl">0.000680998903126475</span>, <span class="op">-</span><span class="fl">0.00661478811857714</span>, </span>
<span><span class="op">-</span><span class="fl">9.12647224737586e-05</span>, <span class="op">-</span><span class="fl">0.00307943086438432</span>, <span class="fl">0.000478467611046574</span>, </span>
<span><span class="fl">0.0149353581264385</span><span class="op">)</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7L</span>, <span class="fl">7L</span><span class="op">)</span>, dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"theta"</span>, </span>
<span><span class="st">"shape"</span>, <span class="st">"scale"</span>, <span class="st">"rxLev+5FU"</span>, <span class="st">"node4"</span>, <span class="st">"scale(rxLev+5FU)"</span>, <span class="st">"scale(node4)"</span></span>
<span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"theta"</span>, <span class="st">"shape"</span>, <span class="st">"scale"</span>, <span class="st">"rxLev+5FU"</span>, <span class="st">"node4"</span>, <span class="st">"scale(rxLev+5FU)"</span>, </span>
<span><span class="st">"scale(node4)"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit_R_D</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit_R_D</span><span class="op">$</span><span class="va">coefficients</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="fl">0.395445104521237</span>, scale <span class="op">=</span> <span class="fl">0.00930823299238263</span>, `rxLev+5FU` <span class="op">=</span> <span class="op">-</span><span class="fl">0.218814899889124</span>, </span>
<span>`shape(rxLev+5FU)` <span class="op">=</span> <span class="op">-</span><span class="fl">0.0250598251068813</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit_R_D</span><span class="op">$</span><span class="va">cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.00464605840970939</span>, <span class="op">-</span><span class="fl">0.000117142438483793</span>, <span class="fl">0.000117142438483891</span>, </span>
<span><span class="op">-</span><span class="fl">0.00464605840970939</span>, <span class="op">-</span><span class="fl">0.000117142438483793</span>, <span class="fl">0.00796369089713632</span>, </span>
<span><span class="op">-</span><span class="fl">0.00796369089713637</span>, <span class="fl">0.000117142438483782</span>, <span class="fl">0.000117142438483891</span>, </span>
<span><span class="op">-</span><span class="fl">0.00796369089713637</span>, <span class="fl">0.0198528324519912</span>, <span class="fl">0.000147891836828856</span>, </span>
<span><span class="op">-</span><span class="fl">0.00464605840970939</span>, <span class="fl">0.000117142438483782</span>, <span class="fl">0.000147891836828856</span>, </span>
<span><span class="fl">0.0112399289334457</span><span class="op">)</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4L</span>, <span class="fl">4L</span><span class="op">)</span>, dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"shape"</span>, </span>
<span><span class="st">"scale"</span>, <span class="st">"rxLev+5FU"</span>, <span class="st">"shape(rxLev+5FU)"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"shape"</span>, <span class="st">"scale"</span>, </span>
<span><span class="st">"rxLev+5FU"</span>, <span class="st">"shape(rxLev+5FU)"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>scipen <span class="op">=</span> <span class="fl">999</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>digits<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>tibble.print_max <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="one-to-one-conversion">“One to one conversion”<a class="anchor" aria-label="anchor" href="#one-to-one-conversion"></a>
</h2>
<p>The first way to create the model is by copying the approach taken in
the original paper. We will then reformulate this structure to get the
same outcomes but simplifying the model structure thanks to WARDEN per
cycle outcome recording.</p>
<div class="section level3">
<h3 id="inputs">Inputs<a class="anchor" aria-label="anchor" href="#inputs"></a>
</h3>
<p>As with any model, we need to load inputs, set initial TTE, event
reactions, utilities/costs, etc. We’ll first replicate the deterministic
analysis, and will then redo the inputs to use the probabilistic
analysis, showcasing as well how <code><a href="../reference/pick_val_v.html">pick_val_v()</a></code> function can
be used to have everything done at once.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">common_all_inputs</span> <span class="op">&lt;-</span><span class="fu"><a href="../reference/add_item.html">add_item</a></span><span class="op">(</span>input <span class="op">=</span> <span class="op">{</span></span>
<span>                      <span class="va">drc</span>         <span class="op">&lt;-</span> <span class="fl">0.04</span> </span>
<span>                      <span class="va">drq</span>         <span class="op">&lt;-</span> <span class="fl">0.015</span></span>
<span>                      <span class="va">p_highrisk</span>  <span class="op">&lt;-</span> <span class="fl">0.6</span></span>
<span>                      <span class="va">d_BS_shape</span> <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_D_shape</span></span>
<span>                      <span class="va">d_BS_rate</span>  <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_D_rate</span></span>
<span>                      <span class="va">d_TTR_cure_1_low</span>  <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_1_low_cure</span></span>
<span>                      </span>
<span>                      <span class="va">d_TTR_cure_1_high</span> <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_1_high_cure</span></span>
<span>                      <span class="va">d_TTR_cure_2_low</span>  <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_2_low_cure</span></span>
<span>                      <span class="va">d_TTR_cure_2_high</span> <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_2_high_cure</span></span>
<span>                      </span>
<span>                      <span class="va">d_TTR_shape_1_low</span>  <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_1_low_shape</span></span>
<span>                      <span class="va">d_TTR_shape_1_high</span> <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_1_high_shape</span></span>
<span>                      <span class="va">d_TTR_shape_2_low</span>  <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_2_low_shape</span></span>
<span>                      <span class="va">d_TTR_shape_2_high</span> <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_2_high_shape</span></span>
<span>                      </span>
<span>                      <span class="va">d_TTR_scale_1_low</span>  <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_1_low_scale</span></span>
<span>                      <span class="va">d_TTR_scale_1_high</span> <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_1_high_scale</span></span>
<span>                      <span class="va">d_TTR_scale_2_low</span>  <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_2_low_scale</span></span>
<span>                      <span class="va">d_TTR_scale_2_high</span> <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_2_high_scale</span></span>
<span>                      </span>
<span>                      <span class="co"># Adjuvant treatment costs</span></span>
<span>                      <span class="va">c_adjuvant_cycle_1</span> <span class="op">&lt;-</span> <span class="fl">5000</span></span>
<span>                      <span class="va">c_adjuvant_cycle_2</span> <span class="op">&lt;-</span> <span class="fl">15000</span></span>
<span>                      </span>
<span>                      <span class="co"># Utility during adjuvant treatment</span></span>
<span>                      <span class="va">u_adjuvant</span> <span class="op">&lt;-</span> <span class="fl">0.70</span></span>
<span>                      </span>
<span>                      <span class="co"># Other adjuvant treatment parameters</span></span>
<span>                      <span class="va">t_adjuvant_cycle</span>      <span class="op">&lt;-</span> <span class="fl">3</span><span class="op">/</span><span class="fl">52</span> <span class="co"># in years</span></span>
<span>                      <span class="va">n_max_adjuvant_cycles</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span>                      </span>
<span>                      <span class="co"># Probability of toxicities during a cycle</span></span>
<span>                      <span class="co"># - conditional on treatment arm</span></span>
<span>                      <span class="va">p_tox_1</span> <span class="op">&lt;-</span> <span class="fl">0.20</span></span>
<span>                      <span class="va">p_tox_2</span> <span class="op">&lt;-</span> <span class="fl">0.40</span></span>
<span>                      </span>
<span>                      <span class="co"># Costs of toxicities</span></span>
<span>                      <span class="va">c_tox</span> <span class="op">&lt;-</span> <span class="fl">2000</span></span>
<span>                      </span>
<span>                      <span class="co"># Disutility of toxicities</span></span>
<span>                      <span class="va">u_dis_tox</span> <span class="op">&lt;-</span> <span class="fl">0.10</span></span>
<span>                      </span>
<span>                      </span>
<span>                      <span class="co">## DISEASE MONITORING</span></span>
<span>                      </span>
<span>                      <span class="co"># Cost of a monitoring cycle</span></span>
<span>                      <span class="va">c_monitor</span> <span class="op">&lt;-</span> <span class="fl">1000</span></span>
<span>                      </span>
<span>                      <span class="co"># Utility while free of recurrence</span></span>
<span>                      <span class="va">u_diseasefree</span> <span class="op">&lt;-</span> <span class="fl">0.80</span></span>
<span>                      </span>
<span>                      <span class="co"># Other disease monitoring parameters</span></span>
<span>                      <span class="va">t_monitor_cycle</span>      <span class="op">&lt;-</span> <span class="fl">1</span> <span class="co"># in years</span></span>
<span>                      <span class="va">n_max_monitor_cycles</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span>                      </span>
<span>                      </span>
<span>                      <span class="co">## RECURRENCE OF DISEASE</span></span>
<span>                      </span>
<span>                      <span class="co"># Log-logistic distribution for the time-to-death due to cancer after recurrence                    (TTD)</span></span>
<span>                      <span class="co"># - conditional on treatment arm</span></span>
<span>                      <span class="va">d_TTD_shape_1</span> <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_R_D_1_shape</span></span>
<span>                      <span class="va">d_TTD_shape_2</span> <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_R_D_2_shape</span></span>
<span>                      </span>
<span>                      <span class="va">d_TTD_scale_1</span> <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_R_D_1_scale</span></span>
<span>                      <span class="va">d_TTD_scale_2</span> <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_R_D_2_scale</span></span>
<span>                      </span>
<span>                      <span class="co"># Cost of treatment for advanced disease</span></span>
<span>                      <span class="va">c_advanced</span> <span class="op">&lt;-</span> <span class="fl">40000</span></span>
<span>                      </span>
<span>                      <span class="co"># Utility during advanced disease</span></span>
<span>                      <span class="va">u_advanced</span> <span class="op">&lt;-</span> <span class="fl">0.60</span></span>
<span>                      </span>
<span><span class="op">}</span><span class="op">)</span>  </span>
<span></span>
<span></span>
<span><span class="co">#Put objects here that do not change as we loop through treatments for a patient</span></span>
<span><span class="co">#We preload the random numbers to clone them across arms for a given patient</span></span>
<span><span class="va">common_pt_inputs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_item.html">add_item</a></span><span class="op">(</span>input<span class="op">=</span><span class="op">{</span></span>
<span>    <span class="va">HighRisk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op">&lt;</span> <span class="va">p_highrisk</span><span class="op">)</span></span>
<span>  </span>
<span>    <span class="va">random_adv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="va">random_tox</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="co">#max of 10 instances</span></span>
<span>    <span class="va">random_cure1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="va">random_cure2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">unique_pt_inputs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_item.html">add_item</a></span><span class="op">(</span>input <span class="op">=</span> <span class="op">{</span></span>
<span>    <span class="va">AdjuvantCycles</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">MonitorCycles</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">Toxicities</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">n_tox</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">q_total</span> <span class="op">&lt;-</span> <span class="va">u_adjuvant</span></span>
<span>    <span class="va">p_toxicity</span> <span class="op">&lt;-</span> <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"one"</span><span class="op">)</span> <span class="op">{</span><span class="va">p_tox_1</span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span><span class="va">p_tox_2</span><span class="op">}</span></span>
<span>    <span class="va">c_adjuvant_cycle</span> <span class="op">&lt;-</span> <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"one"</span><span class="op">)</span> <span class="op">{</span><span class="va">c_adjuvant_cycle_1</span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span><span class="va">c_adjuvant_cycle_2</span><span class="op">}</span></span>
<span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="events">Events<a class="anchor" aria-label="anchor" href="#events"></a>
</h3>
<div class="section level4">
<h4 id="add-initial-events">Add Initial Events<a class="anchor" aria-label="anchor" href="#add-initial-events"></a>
</h4>
<p>We initialize the event times as in the original code. As we are only
interested in replicating the final results, we focus on the key events
and interactions. We have relabeled “TTR” as “advanced”.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">init_event_list</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/add_tte.html">add_tte</a></span><span class="op">(</span>arm<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"one"</span>,<span class="st">"two"</span><span class="op">)</span>, evts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"trt_cycle"</span>,<span class="st">"monitor_cycle"</span>,<span class="st">"advanced"</span>,<span class="st">"death"</span><span class="op">)</span> , other_inp <span class="op">=</span><span class="st">"fl_adv"</span>,input<span class="op">=</span><span class="op">{</span></span>
<span>    <span class="va">trt_cycle</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">monitor_cycle</span> <span class="op">&lt;-</span> <span class="va">t_monitor_cycle</span></span>
<span>  <span class="co"># Sampling BS, we don't need to use the random number as the seed is reset before this chunk is executed automatically</span></span>
<span>  <span class="va">death</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://chjackson.github.io/flexsurv-dev/reference/Gompertz.html" class="external-link">rgompertz</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span>, shape <span class="op">=</span> <span class="va">d_BS_shape</span>, rate <span class="op">=</span> <span class="va">d_BS_rate</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Sampling TTR conditional on arm and HighRisk</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"one"</span> <span class="op">&amp;</span> <span class="va">HighRisk</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">advanced</span> <span class="op">&lt;-</span> <span class="fu">qllogiscure</span><span class="op">(</span>q1 <span class="op">=</span> <span class="va">random_cure1</span>,</span>
<span>                            q2 <span class="op">=</span> <span class="va">random_cure2</span>,</span>
<span>                            cure   <span class="op">=</span> <span class="va">d_TTR_cure_1_low</span>, </span>
<span>                            shape  <span class="op">=</span> <span class="va">d_TTR_shape_1_low</span>, </span>
<span>                            scale  <span class="op">=</span> <span class="va">d_TTR_scale_1_low</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"one"</span> <span class="op">&amp;</span> <span class="va">HighRisk</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">advanced</span> <span class="op">&lt;-</span> <span class="fu">qllogiscure</span><span class="op">(</span>q1 <span class="op">=</span> <span class="va">random_cure1</span>,</span>
<span>                            q2 <span class="op">=</span> <span class="va">random_cure2</span>,</span>
<span>                            cure   <span class="op">=</span> <span class="va">d_TTR_cure_1_high</span>, </span>
<span>                            shape  <span class="op">=</span> <span class="va">d_TTR_shape_1_high</span>, </span>
<span>                            scale  <span class="op">=</span> <span class="va">d_TTR_scale_1_high</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"two"</span> <span class="op">&amp;</span> <span class="va">HighRisk</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">advanced</span> <span class="op">&lt;-</span> <span class="fu">qllogiscure</span><span class="op">(</span>q1 <span class="op">=</span> <span class="va">random_cure1</span>,</span>
<span>                            q2 <span class="op">=</span> <span class="va">random_cure2</span>,</span>
<span>                            cure   <span class="op">=</span> <span class="va">d_TTR_cure_2_low</span>, </span>
<span>                            shape  <span class="op">=</span> <span class="va">d_TTR_shape_2_low</span>, </span>
<span>                            scale  <span class="op">=</span> <span class="va">d_TTR_scale_2_low</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"two"</span> <span class="op">&amp;</span> <span class="va">HighRisk</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">advanced</span> <span class="op">&lt;-</span> <span class="fu">qllogiscure</span><span class="op">(</span>q1 <span class="op">=</span> <span class="va">random_cure1</span>,</span>
<span>                            q2 <span class="op">=</span> <span class="va">random_cure2</span>,</span>
<span>                            cure   <span class="op">=</span> <span class="va">d_TTR_cure_2_high</span>, </span>
<span>                            shape  <span class="op">=</span> <span class="va">d_TTR_shape_2_high</span>, </span>
<span>                            scale  <span class="op">=</span> <span class="va">d_TTR_scale_2_high</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span> </span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"This should not happen in selecting the advanced distribution!"</span><span class="op">)</span>;</span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>    </span>
<span>  <span class="op">}</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="add-reaction-to-those-events">Add Reaction to Those Events<a class="anchor" aria-label="anchor" href="#add-reaction-to-those-events"></a>
</h4>
<p>It’s interesting to note that while in the paper they mention
Toxicities accumulate (and that is true at the “global” level), the
local value of Toxicities when it’s executing the adjustment to QALYs
and Costs stays being 0 and 1 (i.e., as if the toxicity disutility lasts
only during the treatment cycle). For the sake of replication, we keep
that interpretation here.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">evt_react_list</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/add_reactevt.html">add_reactevt</a></span><span class="op">(</span>name_evt <span class="op">=</span> <span class="st">"trt_cycle"</span>,</span>
<span>               input <span class="op">=</span> <span class="op">{</span></span>
<span>                   <span class="va">AdjuvantCycles</span> <span class="op">&lt;-</span> <span class="va">AdjuvantCycles</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>                   </span>
<span>                   <span class="va">Toxicities</span> <span class="op">&lt;-</span> <span class="kw">if</span><span class="op">(</span><span class="va">random_tox</span><span class="op">[</span><span class="va">AdjuvantCycles</span><span class="op">]</span> <span class="op">&lt;</span> <span class="va">p_toxicity</span><span class="op">)</span><span class="op">{</span><span class="fl">1</span><span class="op">}</span> <span class="kw">else</span><span class="op">{</span><span class="fl">0</span><span class="op">}</span></span>
<span>                   <span class="va">n_tox</span> <span class="op">&lt;-</span> <span class="va">n_tox</span> <span class="op">+</span> <span class="va">Toxicities</span></span>
<span>                   </span>
<span>                   </span>
<span>                   <span class="va">cost_adj</span> <span class="op">&lt;-</span> <span class="va">c_adjuvant_cycle</span> <span class="op">+</span> <span class="va">Toxicities</span><span class="op">*</span><span class="va">c_tox</span></span>
<span>                   <span class="va">q_total</span> <span class="op">&lt;-</span> <span class="va">u_adjuvant</span> <span class="op">-</span> <span class="va">Toxicities</span><span class="op">*</span><span class="va">u_dis_tox</span></span>
<span>  </span>
<span>                   <span class="co">#we create new treatment cycle if possible, if not we call monitoring at end of cycle</span></span>
<span>                   <span class="kw">if</span><span class="op">(</span><span class="va">AdjuvantCycles</span><span class="op">&lt;</span><span class="va">n_max_adjuvant_cycles</span><span class="op">)</span><span class="op">{</span></span>
<span>                     <span class="fu"><a href="../reference/new_event.html">new_event</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>trt_cycle <span class="op">=</span> <span class="va">t_adjuvant_cycle</span> <span class="op">+</span> <span class="va">curtime</span><span class="op">)</span><span class="op">)</span></span>
<span>                   <span class="op">}</span> <span class="kw">else</span><span class="op">{</span></span>
<span>                     <span class="fu"><a href="../reference/modify_event.html">modify_event</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>monitor_cycle <span class="op">=</span> <span class="va">t_adjuvant_cycle</span> <span class="op">+</span> <span class="va">curtime</span><span class="op">)</span><span class="op">)</span></span>
<span>                   <span class="op">}</span></span>
<span>                   </span>
<span>               <span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_reactevt.html">add_reactevt</a></span><span class="op">(</span>name_evt <span class="op">=</span> <span class="st">"monitor_cycle"</span>,</span>
<span>               input <span class="op">=</span> <span class="op">{</span></span>
<span>                 <span class="va">MonitorCycles</span> <span class="op">&lt;-</span> <span class="va">MonitorCycles</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>                 <span class="va">cost_monitor</span> <span class="op">&lt;-</span> <span class="va">c_monitor</span></span>
<span>                 <span class="va">q_total</span> <span class="op">&lt;-</span> <span class="va">u_diseasefree</span></span>
<span>                 </span>
<span>                 <span class="kw">if</span><span class="op">(</span><span class="va">MonitorCycles</span><span class="op">&lt;</span><span class="va">n_max_monitor_cycles</span><span class="op">)</span><span class="op">{</span></span>
<span>                  <span class="fu"><a href="../reference/new_event.html">new_event</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>monitor_cycle <span class="op">=</span> <span class="va">curtime</span> <span class="op">+</span> <span class="va">t_monitor_cycle</span><span class="op">)</span><span class="op">)</span></span>
<span>                 <span class="op">}</span></span>
<span>               <span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_reactevt.html">add_reactevt</a></span><span class="op">(</span>name_evt <span class="op">=</span> <span class="st">"advanced"</span>,</span>
<span>               input <span class="op">=</span> <span class="op">{</span></span>
<span>                 <span class="fu"><a href="../reference/modify_event.html">modify_event</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>trt_cycle <span class="op">=</span> <span class="cn">Inf</span>, monitor_cycle <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span> <span class="co">#remove the trt_cycle and monitor_cycle event</span></span>
<span>                 </span>
<span>                 <span class="co"># Sample TTD based on arm</span></span>
<span>                <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"one"</span><span class="op">)</span> <span class="op">{</span></span>
<span>                  <span class="va">TTD</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://chjackson.github.io/flexsurv-dev/reference/Llogis.html" class="external-link">qllogis</a></span><span class="op">(</span><span class="va">random_adv</span>,</span>
<span>                                 shape <span class="op">=</span> <span class="va">d_TTD_shape_1</span>,</span>
<span>                                 scale <span class="op">=</span> <span class="va">d_TTD_scale_1</span><span class="op">)</span></span>
<span>                <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"two"</span><span class="op">)</span> <span class="op">{</span></span>
<span>                  <span class="va">TTD</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://chjackson.github.io/flexsurv-dev/reference/Llogis.html" class="external-link">qllogis</a></span><span class="op">(</span><span class="va">random_adv</span>,</span>
<span>                                 shape <span class="op">=</span> <span class="va">d_TTD_shape_2</span>,</span>
<span>                                 scale <span class="op">=</span> <span class="va">d_TTD_scale_2</span><span class="op">)</span></span>
<span>                <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span> </span>
<span>                  <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"This should not happen in selecting the TTD distribution!"</span><span class="op">)</span>;</span>
<span>                <span class="op">}</span></span>
<span>                <span class="va">final_TTD</span> <span class="op">&lt;-</span> <span class="va">TTD</span><span class="op">+</span><span class="va">curtime</span></span>
<span>                <span class="co"># Check whether TTD is lower than BS, if not correct to BS.</span></span>
<span>                 <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="../reference/get_event.html">get_event</a></span><span class="op">(</span><span class="st">"death"</span><span class="op">)</span> <span class="op">&gt;</span> <span class="va">final_TTD</span><span class="op">)</span><span class="op">{</span></span>
<span>                   <span class="fu"><a href="../reference/modify_event.html">modify_event</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>death <span class="op">=</span> <span class="va">final_TTD</span><span class="op">)</span><span class="op">)</span> </span>
<span>                 <span class="op">}</span></span>
<span>                <span class="va">q_total</span> <span class="op">&lt;-</span> <span class="va">u_advanced</span></span>
<span>                <span class="va">cost_advanced</span> <span class="op">&lt;-</span> <span class="va">c_advanced</span></span>
<span>                 </span>
<span>               <span class="op">}</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_reactevt.html">add_reactevt</a></span><span class="op">(</span>name_evt <span class="op">=</span> <span class="st">"death"</span>,</span>
<span>               input <span class="op">=</span> <span class="op">{</span></span>
<span>                 <span class="va">curtime</span>   <span class="op">&lt;-</span> <span class="cn">Inf</span> <span class="co">#exits simulation, no need to remove other evts</span></span>
<span>               <span class="op">}</span><span class="op">)</span> </span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="costs-and-utilities">Costs and Utilities<a class="anchor" aria-label="anchor" href="#costs-and-utilities"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">util_ongoing</span> <span class="op">&lt;-</span> <span class="st">"q_total"</span></span>
<span></span>
<span><span class="va">cost_instant</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cost_adj"</span>,<span class="st">"cost_monitor"</span>,<span class="st">"cost_advanced"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="model">Model<a class="anchor" aria-label="anchor" href="#model"></a>
</h3>
<div class="section level4">
<h4 id="model-execution">Model Execution<a class="anchor" aria-label="anchor" href="#model-execution"></a>
</h4>
<p>For the sake of reducing running times of this vignette, we have
pre-run all results, so we leave a small run only to showcase
results.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_sim.html">run_sim</a></span><span class="op">(</span>  </span>
<span>  npats<span class="op">=</span><span class="fl">5000</span>,                               <span class="co"># number of patients to be simulated</span></span>
<span>  n_sim<span class="op">=</span><span class="fl">1</span>,                                  <span class="co"># number of simulations to run</span></span>
<span>  psa_bool <span class="op">=</span> <span class="cn">FALSE</span>,                         <span class="co"># use PSA or not. If n_sim &gt; 1 and psa_bool = FALSE, then difference in outcomes is due to sampling (number of pats simulated)  </span></span>
<span>  arm_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"one"</span>, <span class="st">"two"</span><span class="op">)</span>,             <span class="co"># intervention list</span></span>
<span>  common_all_inputs <span class="op">=</span> <span class="va">common_all_inputs</span>,    <span class="co"># inputs common that do not change within a simulation</span></span>
<span>  common_pt_inputs <span class="op">=</span> <span class="va">common_pt_inputs</span>,      <span class="co"># inputs that change within a simulation but are not affected by the intervention</span></span>
<span>  unique_pt_inputs <span class="op">=</span> <span class="va">unique_pt_inputs</span>,</span>
<span>  init_event_list <span class="op">=</span> <span class="va">init_event_list</span>,        <span class="co"># initial event list</span></span>
<span>  evt_react_list <span class="op">=</span> <span class="va">evt_react_list</span>,          <span class="co"># reaction of events</span></span>
<span>  util_ongoing_list <span class="op">=</span> <span class="va">util_ongoing</span>,</span>
<span>  cost_instant_list <span class="op">=</span> <span class="va">cost_instant</span>,</span>
<span>  ipd <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Analysis number: 1</span></span>
<span><span class="co">#&gt; Simulation number: 1</span></span>
<span><span class="co">#&gt; Patient-arm data aggregated across events by selecting the last value for input_out items.</span></span>
<span><span class="co">#&gt; Time to run simulation 1: 14.26s</span></span>
<span><span class="co">#&gt; Time to run analysis 1: 14.26s</span></span>
<span><span class="co">#&gt; Total time to run: 14.27s</span></span>
<span><span class="co">#&gt; Simulation finalized;</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="post-processing-of-model-outputs">Post-processing of Model Outputs<a class="anchor" aria-label="anchor" href="#post-processing-of-model-outputs"></a>
</h3>
<div class="section level4">
<h4 id="summary-of-example-results">Summary of Example Results<a class="anchor" aria-label="anchor" href="#summary-of-example-results"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="fu"><a href="../reference/summary_results_det.html">summary_results_det</a></span><span class="op">(</span><span class="va">results</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, arm <span class="op">=</span><span class="st">"two"</span><span class="op">)</span> <span class="co">#print first simulation</span></span>
<span><span class="co">#&gt;                            one       two</span></span>
<span><span class="co">#&gt; costs                 77004.39 170643.81</span></span>
<span><span class="co">#&gt; dcosts                93639.42      0.00</span></span>
<span><span class="co">#&gt; lys                       8.41     10.74</span></span>
<span><span class="co">#&gt; dlys                      2.33      0.00</span></span>
<span><span class="co">#&gt; qalys                     6.41      8.35</span></span>
<span><span class="co">#&gt; dqalys                    1.94      0.00</span></span>
<span><span class="co">#&gt; ICER                  40207.55        NA</span></span>
<span><span class="co">#&gt; ICUR                  48287.58        NA</span></span>
<span><span class="co">#&gt; INMB                   3320.73        NA</span></span>
<span><span class="co">#&gt; costs_undisc          79161.60 173625.80</span></span>
<span><span class="co">#&gt; dcosts_undisc         94464.20      0.00</span></span>
<span><span class="co">#&gt; lys_undisc                9.86     12.78</span></span>
<span><span class="co">#&gt; dlys_undisc               2.92      0.00</span></span>
<span><span class="co">#&gt; qalys_undisc              7.56      9.97</span></span>
<span><span class="co">#&gt; dqalys_undisc             2.42      0.00</span></span>
<span><span class="co">#&gt; ICER_undisc           32354.46        NA</span></span>
<span><span class="co">#&gt; ICUR_undisc           39051.82        NA</span></span>
<span><span class="co">#&gt; INMB_undisc           26483.04        NA</span></span>
<span><span class="co">#&gt; cost_adj              49310.73 148203.86</span></span>
<span><span class="co">#&gt; dcost_adj             98893.13      0.00</span></span>
<span><span class="co">#&gt; cost_adj_undisc       49792.60 149675.00</span></span>
<span><span class="co">#&gt; dcost_adj_undisc      99882.40      0.00</span></span>
<span><span class="co">#&gt; cost_advanced         25461.82  19651.38</span></span>
<span><span class="co">#&gt; dcost_advanced        -5810.44      0.00</span></span>
<span><span class="co">#&gt; cost_advanced_undisc  26944.00  20904.00</span></span>
<span><span class="co">#&gt; dcost_advanced_undisc -6040.00      0.00</span></span>
<span><span class="co">#&gt; cost_monitor           2231.84   2788.57</span></span>
<span><span class="co">#&gt; dcost_monitor           556.73      0.00</span></span>
<span><span class="co">#&gt; cost_monitor_undisc    2425.00   3046.80</span></span>
<span><span class="co">#&gt; dcost_monitor_undisc    621.80      0.00</span></span>
<span><span class="co">#&gt; q_total                   6.41      8.35</span></span>
<span><span class="co">#&gt; dq_total                  1.94      0.00</span></span>
<span><span class="co">#&gt; q_total_undisc            7.56      9.97</span></span>
<span><span class="co">#&gt; dq_total_undisc           2.42      0.00</span></span>
<span></span>
<span><span class="va">psa_ipd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">results</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="st">"merged_df"</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">psa_ipd</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html" class="external-link">kable_styling</a></span><span class="op">(</span>bootstrap_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
pat_id
</th>
<th style="text-align:left;">
arm
</th>
<th style="text-align:right;">
total_lys
</th>
<th style="text-align:right;">
total_qalys
</th>
<th style="text-align:right;">
total_costs
</th>
<th style="text-align:right;">
total_lys_undisc
</th>
<th style="text-align:right;">
total_qalys_undisc
</th>
<th style="text-align:right;">
total_costs_undisc
</th>
<th style="text-align:right;">
cost_adj
</th>
<th style="text-align:right;">
cost_monitor
</th>
<th style="text-align:right;">
cost_advanced
</th>
<th style="text-align:right;">
q_total
</th>
<th style="text-align:right;">
cost_adj_undisc
</th>
<th style="text-align:right;">
cost_monitor_undisc
</th>
<th style="text-align:right;">
cost_advanced_undisc
</th>
<th style="text-align:right;">
nexttime
</th>
<th style="text-align:right;">
number_events
</th>
<th style="text-align:right;">
simulation
</th>
<th style="text-align:right;">
sensitivity
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
one
</td>
<td style="text-align:right;">
8.91
</td>
<td style="text-align:right;">
7.05
</td>
<td style="text-align:right;">
59980
</td>
<td style="text-align:right;">
9.56
</td>
<td style="text-align:right;">
7.57
</td>
<td style="text-align:right;">
61000
</td>
<td style="text-align:right;">
55454
</td>
<td style="text-align:right;">
4526
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
7.05
</td>
<td style="text-align:right;">
56000
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
34.59
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
one
</td>
<td style="text-align:right;">
2.29
</td>
<td style="text-align:right;">
1.60
</td>
<td style="text-align:right;">
92205
</td>
<td style="text-align:right;">
2.33
</td>
<td style="text-align:right;">
1.63
</td>
<td style="text-align:right;">
95000
</td>
<td style="text-align:right;">
53476
</td>
<td style="text-align:right;">
978
</td>
<td style="text-align:right;">
37751
</td>
<td style="text-align:right;">
1.60
</td>
<td style="text-align:right;">
54000
</td>
<td style="text-align:right;">
1000
</td>
<td style="text-align:right;">
40000
</td>
<td style="text-align:right;">
9.32
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
one
</td>
<td style="text-align:right;">
3.63
</td>
<td style="text-align:right;">
2.52
</td>
<td style="text-align:right;">
90270
</td>
<td style="text-align:right;">
3.73
</td>
<td style="text-align:right;">
2.59
</td>
<td style="text-align:right;">
94000
</td>
<td style="text-align:right;">
51495
</td>
<td style="text-align:right;">
1918
</td>
<td style="text-align:right;">
36858
</td>
<td style="text-align:right;">
2.52
</td>
<td style="text-align:right;">
52000
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
40000
</td>
<td style="text-align:right;">
14.29
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
one
</td>
<td style="text-align:right;">
6.79
</td>
<td style="text-align:right;">
4.80
</td>
<td style="text-align:right;">
93183
</td>
<td style="text-align:right;">
7.16
</td>
<td style="text-align:right;">
5.05
</td>
<td style="text-align:right;">
100000
</td>
<td style="text-align:right;">
55463
</td>
<td style="text-align:right;">
3691
</td>
<td style="text-align:right;">
34029
</td>
<td style="text-align:right;">
4.80
</td>
<td style="text-align:right;">
56000
</td>
<td style="text-align:right;">
4000
</td>
<td style="text-align:right;">
40000
</td>
<td style="text-align:right;">
29.35
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
one
</td>
<td style="text-align:right;">
4.35
</td>
<td style="text-align:right;">
3.30
</td>
<td style="text-align:right;">
93393
</td>
<td style="text-align:right;">
4.50
</td>
<td style="text-align:right;">
3.41
</td>
<td style="text-align:right;">
100000
</td>
<td style="text-align:right;">
55427
</td>
<td style="text-align:right;">
3691
</td>
<td style="text-align:right;">
34275
</td>
<td style="text-align:right;">
3.30
</td>
<td style="text-align:right;">
56000
</td>
<td style="text-align:right;">
4000
</td>
<td style="text-align:right;">
40000
</td>
<td style="text-align:right;">
23.84
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
one
</td>
<td style="text-align:right;">
6.77
</td>
<td style="text-align:right;">
4.11
</td>
<td style="text-align:right;">
78980
</td>
<td style="text-align:right;">
7.13
</td>
<td style="text-align:right;">
4.33
</td>
<td style="text-align:right;">
80000
</td>
<td style="text-align:right;">
39685
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
39295
</td>
<td style="text-align:right;">
4.11
</td>
<td style="text-align:right;">
40000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
40000
</td>
<td style="text-align:right;">
16.34
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
one
</td>
<td style="text-align:right;">
21.75
</td>
<td style="text-align:right;">
17.33
</td>
<td style="text-align:right;">
58012
</td>
<td style="text-align:right;">
26.28
</td>
<td style="text-align:right;">
20.96
</td>
<td style="text-align:right;">
59000
</td>
<td style="text-align:right;">
53485
</td>
<td style="text-align:right;">
4526
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
17.33
</td>
<td style="text-align:right;">
54000
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
68.05
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
one
</td>
<td style="text-align:right;">
11.28
</td>
<td style="text-align:right;">
8.95
</td>
<td style="text-align:right;">
59967
</td>
<td style="text-align:right;">
12.34
</td>
<td style="text-align:right;">
9.80
</td>
<td style="text-align:right;">
61000
</td>
<td style="text-align:right;">
55441
</td>
<td style="text-align:right;">
4526
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
8.95
</td>
<td style="text-align:right;">
56000
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
40.16
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
one
</td>
<td style="text-align:right;">
4.05
</td>
<td style="text-align:right;">
2.59
</td>
<td style="text-align:right;">
92638
</td>
<td style="text-align:right;">
4.18
</td>
<td style="text-align:right;">
2.67
</td>
<td style="text-align:right;">
95000
</td>
<td style="text-align:right;">
53441
</td>
<td style="text-align:right;">
978
</td>
<td style="text-align:right;">
38220
</td>
<td style="text-align:right;">
2.59
</td>
<td style="text-align:right;">
54000
</td>
<td style="text-align:right;">
1000
</td>
<td style="text-align:right;">
40000
</td>
<td style="text-align:right;">
12.69
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
one
</td>
<td style="text-align:right;">
27.70
</td>
<td style="text-align:right;">
16.78
</td>
<td style="text-align:right;">
98424
</td>
<td style="text-align:right;">
35.71
</td>
<td style="text-align:right;">
21.59
</td>
<td style="text-align:right;">
101000
</td>
<td style="text-align:right;">
59378
</td>
<td style="text-align:right;">
978
</td>
<td style="text-align:right;">
38068
</td>
<td style="text-align:right;">
16.78
</td>
<td style="text-align:right;">
60000
</td>
<td style="text-align:right;">
1000
</td>
<td style="text-align:right;">
40000
</td>
<td style="text-align:right;">
75.85
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level2">
<h2 id="rethinking-the-approach">Rethinking the Approach<a class="anchor" aria-label="anchor" href="#rethinking-the-approach"></a>
</h2>
<p>We can rethink a bit the general approach. Thanks to WARDEN per cycle
discounting, the treatment cycles and the monitoring events could be
replaced for a simpler approach but with similar outcomes. This is a
suggested approach already mentioned in the original paper.</p>
<p>To do so, we just declare in the inputs the characteristics of the
cycles (i.e., the cycle length and maximum amount of cycles), and we
keep the events as needed (we just need the start event and the
monitoring starting event, no need to keep the cycles). For the
toxicities, we just calculate how many toxicities a patient would have,
and we use the proportion to calculate the average cost that would apply
through each of the cycles.</p>
<p>This simplifies the modelling, the number of events, and increases
running speed (roughly twice as fast) while providing the same model
structure.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unique_pt_inputs2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_item.html">add_item</a></span><span class="op">(</span>input <span class="op">=</span> <span class="op">{</span></span>
<span>    <span class="va">n_tox</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">q_total</span> <span class="op">&lt;-</span> <span class="va">u_adjuvant</span></span>
<span>    <span class="va">p_toxicity</span> <span class="op">&lt;-</span> <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"one"</span><span class="op">)</span> <span class="op">{</span><span class="va">p_tox_1</span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span><span class="va">p_tox_2</span><span class="op">}</span></span>
<span>    <span class="co">#this is for the rethinking approach</span></span>
<span>    <span class="va">cost_tox</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">cost_monitor</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">cost_adj</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    </span>
<span>    <span class="va">cost_tox_cycle_l</span> <span class="op">&lt;-</span> <span class="va">t_adjuvant_cycle</span></span>
<span>    <span class="va">cost_tox_cycle_starttime</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">cost_tox_max_cycles</span> <span class="op">&lt;-</span> <span class="va">n_max_adjuvant_cycles</span></span>
<span>    </span>
<span>    <span class="va">cost_adj_cycle_l</span> <span class="op">&lt;-</span> <span class="va">t_adjuvant_cycle</span></span>
<span>    <span class="va">cost_adj_cycle_starttime</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">cost_adj_max_cycles</span> <span class="op">&lt;-</span> <span class="va">n_max_adjuvant_cycles</span></span>
<span>    </span>
<span>    <span class="va">cost_monitor_cycle_l</span> <span class="op">&lt;-</span> <span class="va">t_monitor_cycle</span></span>
<span>    <span class="va">cost_monitor_cycle_starttime</span> <span class="op">&lt;-</span> <span class="va">t_monitor_cycle</span></span>
<span>    <span class="va">cost_monitor_max_cycles</span> <span class="op">&lt;-</span> <span class="va">n_max_monitor_cycles</span></span>
<span>    </span>
<span>    <span class="va">c_adjuvant_cycle</span> <span class="op">&lt;-</span> <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"one"</span><span class="op">)</span> <span class="op">{</span><span class="va">c_adjuvant_cycle_1</span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span><span class="va">c_adjuvant_cycle_2</span><span class="op">}</span></span>
<span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">init_event_list</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/add_tte.html">add_tte</a></span><span class="op">(</span>arm<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"one"</span>,<span class="st">"two"</span><span class="op">)</span>, evts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"start"</span>,<span class="st">"monitoring"</span>,<span class="st">"advanced"</span>,<span class="st">"death"</span><span class="op">)</span> ,input<span class="op">=</span><span class="op">{</span></span>
<span>    <span class="va">start</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    </span>
<span>  <span class="co"># Sampling BS</span></span>
<span>  <span class="va">death</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://chjackson.github.io/flexsurv-dev/reference/Gompertz.html" class="external-link">rgompertz</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span>, shape <span class="op">=</span> <span class="va">d_BS_shape</span>, rate <span class="op">=</span> <span class="va">d_BS_rate</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Sampling TTR conditional on arm and HighRisk</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"one"</span> <span class="op">&amp;</span> <span class="va">HighRisk</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">advanced</span> <span class="op">&lt;-</span> <span class="fu">qllogiscure</span><span class="op">(</span>q1 <span class="op">=</span> <span class="va">random_cure1</span>,</span>
<span>                            q2 <span class="op">=</span> <span class="va">random_cure2</span>,</span>
<span>                            cure   <span class="op">=</span> <span class="va">d_TTR_cure_1_low</span>, </span>
<span>                            shape  <span class="op">=</span> <span class="va">d_TTR_shape_1_low</span>, </span>
<span>                            scale  <span class="op">=</span> <span class="va">d_TTR_scale_1_low</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"one"</span> <span class="op">&amp;</span> <span class="va">HighRisk</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">advanced</span> <span class="op">&lt;-</span> <span class="fu">qllogiscure</span><span class="op">(</span>q1 <span class="op">=</span> <span class="va">random_cure1</span>,</span>
<span>                            q2 <span class="op">=</span> <span class="va">random_cure2</span>,</span>
<span>                            cure   <span class="op">=</span> <span class="va">d_TTR_cure_1_high</span>, </span>
<span>                            shape  <span class="op">=</span> <span class="va">d_TTR_shape_1_high</span>, </span>
<span>                            scale  <span class="op">=</span> <span class="va">d_TTR_scale_1_high</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"two"</span> <span class="op">&amp;</span> <span class="va">HighRisk</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">advanced</span> <span class="op">&lt;-</span> <span class="fu">qllogiscure</span><span class="op">(</span>q1 <span class="op">=</span> <span class="va">random_cure1</span>,</span>
<span>                            q2 <span class="op">=</span> <span class="va">random_cure2</span>,</span>
<span>                            cure   <span class="op">=</span> <span class="va">d_TTR_cure_2_low</span>, </span>
<span>                            shape  <span class="op">=</span> <span class="va">d_TTR_shape_2_low</span>, </span>
<span>                            scale  <span class="op">=</span> <span class="va">d_TTR_scale_2_low</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"two"</span> <span class="op">&amp;</span> <span class="va">HighRisk</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">advanced</span> <span class="op">&lt;-</span> <span class="fu">qllogiscure</span><span class="op">(</span>q1 <span class="op">=</span> <span class="va">random_cure1</span>,</span>
<span>                            q2 <span class="op">=</span> <span class="va">random_cure2</span>,</span>
<span>                            cure   <span class="op">=</span> <span class="va">d_TTR_cure_2_high</span>, </span>
<span>                            shape  <span class="op">=</span> <span class="va">d_TTR_shape_2_high</span>, </span>
<span>                            scale  <span class="op">=</span> <span class="va">d_TTR_scale_2_high</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span> </span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"This should not happen in selecting the TTR distribution!"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="co">#we can already tell if monitoring event will occur or not</span></span>
<span>  <span class="va">monitoring</span> <span class="op">&lt;-</span> <span class="kw">if</span><span class="op">(</span><span class="va">t_adjuvant_cycle</span><span class="op">*</span><span class="op">(</span><span class="va">n_max_adjuvant_cycles</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">death</span>,<span class="va">advanced</span><span class="op">)</span><span class="op">)</span><span class="op">{</span><span class="cn">Inf</span><span class="op">}</span><span class="kw">else</span><span class="op">{</span><span class="va">t_adjuvant_cycle</span><span class="op">*</span><span class="op">(</span><span class="va">n_max_adjuvant_cycles</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">}</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="va">evt_react_list</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/add_reactevt.html">add_reactevt</a></span><span class="op">(</span>name_evt <span class="op">=</span> <span class="st">"start"</span>,</span>
<span>               input <span class="op">=</span> <span class="op">{</span></span>
<span>                  <span class="co">#how many toxic events will we have?</span></span>
<span>                   <span class="va">n_cycles_tobedone</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fu"><a href="../reference/next_event.html">next_event</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">event_time</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%/%</a></span> <span class="va">t_adjuvant_cycle</span><span class="op">)</span></span>
<span>                   <span class="va">n_tox</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">n_cycles_tobedone</span> <span class="op">==</span><span class="fl">0</span>, <span class="fl">0</span>,<span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">random_tox</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">n_cycles_tobedone</span><span class="op">]</span> <span class="op">&lt;</span> <span class="va">p_toxicity</span><span class="op">)</span><span class="op">)</span></span>
<span>                   <span class="co">#calculate the proportion out of maximum possible</span></span>
<span>                   <span class="va">prop_tox</span> <span class="op">&lt;-</span> <span class="va">n_tox</span><span class="op">/</span><span class="op">(</span><span class="va">n_cycles_tobedone</span><span class="op">)</span></span>
<span>                   <span class="va">prop_tox</span> <span class="op">&lt;-</span> <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">prop_tox</span><span class="op">)</span><span class="op">)</span><span class="op">{</span><span class="fl">0</span><span class="op">}</span><span class="kw">else</span><span class="op">{</span><span class="va">prop_tox</span><span class="op">}</span></span>
<span>                   </span>
<span>                   <span class="va">cost_tox</span> <span class="op">&lt;-</span> <span class="va">prop_tox</span><span class="op">*</span><span class="va">c_tox</span></span>
<span>                   <span class="va">cost_adj</span> <span class="op">&lt;-</span> <span class="va">c_adjuvant_cycle</span> </span>
<span>                   <span class="va">q_total</span> <span class="op">&lt;-</span> <span class="va">u_adjuvant</span> <span class="op">-</span> <span class="va">prop_tox</span><span class="op">*</span><span class="va">u_dis_tox</span></span>
<span>  </span>
<span>                   </span>
<span>               <span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_reactevt.html">add_reactevt</a></span><span class="op">(</span>name_evt <span class="op">=</span> <span class="st">"monitoring"</span>,</span>
<span>               input <span class="op">=</span> <span class="op">{</span></span>
<span>                 <span class="va">cost_adj</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>                 <span class="va">cost_tox</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span></span>
<span>                 <span class="va">cost_monitor</span> <span class="op">&lt;-</span> <span class="va">c_monitor</span></span>
<span>                 <span class="va">cost_monitor_cycle_starttime</span> <span class="op">&lt;-</span> <span class="va">curtime</span></span>
<span></span>
<span>                 <span class="va">q_total</span> <span class="op">&lt;-</span> <span class="va">u_diseasefree</span></span>
<span>                 </span>
<span>               <span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_reactevt.html">add_reactevt</a></span><span class="op">(</span>name_evt <span class="op">=</span> <span class="st">"advanced"</span>,</span>
<span>               input <span class="op">=</span> <span class="op">{</span></span>
<span>                 </span>
<span>                 <span class="va">cost_adj</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>                 <span class="va">cost_tox</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>                 <span class="va">cost_monitor</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span></span>
<span>                 <span class="co"># Sample TTD based on arm</span></span>
<span>                <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"one"</span><span class="op">)</span> <span class="op">{</span></span>
<span>                  <span class="va">TTD</span> <span class="op">&lt;-</span> <span class="fu">flexsurv</span><span class="fu">::</span><span class="fu"><a href="http://chjackson.github.io/flexsurv-dev/reference/Llogis.html" class="external-link">qllogis</a></span><span class="op">(</span><span class="va">random_adv</span>,</span>
<span>                                 shape <span class="op">=</span> <span class="va">d_TTD_shape_1</span>,</span>
<span>                                 scale <span class="op">=</span> <span class="va">d_TTD_scale_1</span><span class="op">)</span></span>
<span>                <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span><span class="op">(</span><span class="va">arm</span> <span class="op">==</span> <span class="st">"two"</span><span class="op">)</span> <span class="op">{</span></span>
<span>                  <span class="va">TTD</span> <span class="op">&lt;-</span> <span class="fu">flexsurv</span><span class="fu">::</span><span class="fu"><a href="http://chjackson.github.io/flexsurv-dev/reference/Llogis.html" class="external-link">qllogis</a></span><span class="op">(</span><span class="va">random_adv</span>,</span>
<span>                                 shape <span class="op">=</span> <span class="va">d_TTD_shape_2</span>,</span>
<span>                                 scale <span class="op">=</span> <span class="va">d_TTD_scale_2</span><span class="op">)</span></span>
<span>                <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span> </span>
<span>                  <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"This should not happen in selecting the TTD distribution!"</span><span class="op">)</span></span>
<span>                <span class="op">}</span></span>
<span>                <span class="va">final_TTD</span> <span class="op">&lt;-</span> <span class="va">TTD</span><span class="op">+</span><span class="va">curtime</span></span>
<span>                <span class="co"># Check whether TTD is lower than BS, if not correct to BS.</span></span>
<span>                 <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="../reference/get_event.html">get_event</a></span><span class="op">(</span><span class="st">"death"</span><span class="op">)</span> <span class="op">&gt;</span> <span class="va">final_TTD</span><span class="op">)</span><span class="op">{</span></span>
<span>                   <span class="fu"><a href="../reference/modify_event.html">modify_event</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>death <span class="op">=</span> <span class="va">final_TTD</span><span class="op">)</span><span class="op">)</span> </span>
<span>                 <span class="op">}</span></span>
<span>                 </span>
<span>                 <span class="va">cost_advanced</span> <span class="op">&lt;-</span> <span class="va">c_advanced</span></span>
<span>                 <span class="va">q_total</span> <span class="op">&lt;-</span> <span class="va">u_advanced</span></span>
<span>               <span class="op">}</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_reactevt.html">add_reactevt</a></span><span class="op">(</span>name_evt <span class="op">=</span> <span class="st">"death"</span>,</span>
<span>               input <span class="op">=</span> <span class="op">{</span></span>
<span>                 <span class="va">curtime</span> <span class="op">&lt;-</span> <span class="cn">Inf</span> <span class="co">#exits simulation, no need to remove other evts</span></span>
<span>               <span class="op">}</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">util_ongoing</span> <span class="op">&lt;-</span> <span class="st">"q_total"</span></span>
<span></span>
<span><span class="va">cost_instant</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cost_advanced"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cost_cycle</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cost_tox"</span>,<span class="st">"cost_adj"</span>,<span class="st">"cost_monitor"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">results2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_sim.html">run_sim</a></span><span class="op">(</span>  </span>
<span>  npats<span class="op">=</span><span class="fl">5000</span>,                               <span class="co"># number of patients to be simulated</span></span>
<span>  n_sim<span class="op">=</span><span class="fl">1</span>,                                  <span class="co"># number of simulations to run</span></span>
<span>  psa_bool <span class="op">=</span> <span class="cn">FALSE</span>,                         <span class="co"># use PSA or not. If n_sim &gt; 1 and psa_bool = FALSE, then difference in outcomes is due to sampling (number of pats simulated)  </span></span>
<span>  arm_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"one"</span>, <span class="st">"two"</span><span class="op">)</span>,             <span class="co"># intervention list</span></span>
<span>  common_all_inputs <span class="op">=</span> <span class="va">common_all_inputs</span>,    <span class="co"># inputs common that do not change within a simulation</span></span>
<span>  common_pt_inputs <span class="op">=</span> <span class="va">common_pt_inputs</span>,      <span class="co"># inputs that change within a simulation but are not affected by the intervention</span></span>
<span>  unique_pt_inputs <span class="op">=</span> <span class="va">unique_pt_inputs2</span>,</span>
<span>  init_event_list <span class="op">=</span> <span class="va">init_event_list</span>,        <span class="co"># initial event list</span></span>
<span>  evt_react_list <span class="op">=</span> <span class="va">evt_react_list</span>,          <span class="co"># reaction of events</span></span>
<span>  util_ongoing_list <span class="op">=</span> <span class="va">util_ongoing</span>,</span>
<span>  cost_instant_list <span class="op">=</span> <span class="va">cost_instant</span>,</span>
<span>  cost_cycle_list <span class="op">=</span> <span class="va">cost_cycle</span>,</span>
<span>  ipd <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  input_out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n_tox"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Analysis number: 1</span></span>
<span><span class="co">#&gt; Simulation number: 1</span></span>
<span><span class="co">#&gt; Patient-arm data aggregated across events by selecting the last value for input_out items.</span></span>
<span><span class="co">#&gt; Time to run simulation 1: 6.41s</span></span>
<span><span class="co">#&gt; Time to run analysis 1: 6.41s</span></span>
<span><span class="co">#&gt; Total time to run: 6.41s</span></span>
<span><span class="co">#&gt; Simulation finalized;</span></span></code></pre></div>
<div class="section level3">
<h3 id="summary-of-results">Summary of Results<a class="anchor" aria-label="anchor" href="#summary-of-results"></a>
</h3>
<p>We can check speed of convergence. Note that making sure the random
numbers are “cloned” per patient across arms means that convergence
occurs faster than in the original paper, which can save computation
time, and ensures more stability of all the outcomes.</p>
<p>We have plotted the observations through the simulation run for
simmer with 3 different seeds (to display Monte Carlo error) and WARDEN
(original, reworked and reworked with two different seeds). It’s very
noticeable that stability of the ICER is achieved faster with WARDEN,
this is due to the use of cloning of the random numbers, which means
that ~30,000 simulations would suffice to achieve stability. While the
differences between simulations seem relatively large, in reality with
the cloning random numbers approach it can be seen that the ICER remains
within 2% of the final value already after 10,000 simulations.</p>
<p>The running times with the original WARDEN approach are comparable to
those of simmer shown by the paper, even if simmer uses a complex C++
implementation in the back-end. By using the reworked approach, WARDEN
is able to cut running time by half. In my computer simmer took between
220 and 300 seconds to run 100,000 simulations. With WARDEN, the “one to
one” approach took around 200 seconds. The reworked approach took 100
seconds.</p>
<pre><code><span><span class="co">#&gt;                                    one       two</span></span>
<span><span class="co">#&gt; costs                         76971.21 170610.19</span></span>
<span><span class="co">#&gt; dcosts                        93638.98      0.00</span></span>
<span><span class="co">#&gt; lys                               8.41     10.74</span></span>
<span><span class="co">#&gt; dlys                              2.33      0.00</span></span>
<span><span class="co">#&gt; qalys                             6.41      8.35</span></span>
<span><span class="co">#&gt; dqalys                            1.94      0.00</span></span>
<span><span class="co">#&gt; ICER                          40207.36        NA</span></span>
<span><span class="co">#&gt; ICUR                          48323.43        NA</span></span>
<span><span class="co">#&gt; INMB                           3248.79        NA</span></span>
<span><span class="co">#&gt; costs_undisc                  79131.80 173596.60</span></span>
<span><span class="co">#&gt; dcosts_undisc                 94464.80      0.00</span></span>
<span><span class="co">#&gt; lys_undisc                        9.86     12.78</span></span>
<span><span class="co">#&gt; dlys_undisc                       2.92      0.00</span></span>
<span><span class="co">#&gt; qalys_undisc                      7.55      9.97</span></span>
<span><span class="co">#&gt; dqalys_undisc                     2.42      0.00</span></span>
<span><span class="co">#&gt; ICER_undisc                   32354.67        NA</span></span>
<span><span class="co">#&gt; ICUR_undisc                   39075.66        NA</span></span>
<span><span class="co">#&gt; INMB_undisc                   26409.41        NA</span></span>
<span><span class="co">#&gt; cost_adj                      45641.06 140680.89</span></span>
<span><span class="co">#&gt; dcost_adj                     95039.83      0.00</span></span>
<span><span class="co">#&gt; cost_adj_cycle_l                  0.20      0.19</span></span>
<span><span class="co">#&gt; dcost_adj_cycle_l                 0.00      0.00</span></span>
<span><span class="co">#&gt; cost_adj_cycle_starttime          0.00      0.00</span></span>
<span><span class="co">#&gt; dcost_adj_cycle_starttime         0.00      0.00</span></span>
<span><span class="co">#&gt; cost_adj_max_cycles              34.36     33.60</span></span>
<span><span class="co">#&gt; dcost_adj_max_cycles             -0.76      0.00</span></span>
<span><span class="co">#&gt; cost_adj_undisc               46087.00 142077.00</span></span>
<span><span class="co">#&gt; dcost_adj_undisc              95990.00      0.00</span></span>
<span><span class="co">#&gt; cost_advanced                 25461.82  19651.38</span></span>
<span><span class="co">#&gt; dcost_advanced                -5810.44      0.00</span></span>
<span><span class="co">#&gt; cost_advanced_undisc          26944.00  20904.00</span></span>
<span><span class="co">#&gt; dcost_advanced_undisc         -6040.00      0.00</span></span>
<span><span class="co">#&gt; cost_monitor                   2191.30   2754.63</span></span>
<span><span class="co">#&gt; dcost_monitor                   563.33      0.00</span></span>
<span><span class="co">#&gt; cost_monitor_cycle_l              3.44      3.36</span></span>
<span><span class="co">#&gt; dcost_monitor_cycle_l            -0.08      0.00</span></span>
<span><span class="co">#&gt; cost_monitor_cycle_starttime      2.72      2.62</span></span>
<span><span class="co">#&gt; dcost_monitor_cycle_starttime    -0.10      0.00</span></span>
<span><span class="co">#&gt; cost_monitor_max_cycles          17.18     16.80</span></span>
<span><span class="co">#&gt; dcost_monitor_max_cycles         -0.38      0.00</span></span>
<span><span class="co">#&gt; cost_monitor_undisc            2387.80   3017.60</span></span>
<span><span class="co">#&gt; dcost_monitor_undisc            629.80      0.00</span></span>
<span><span class="co">#&gt; cost_tox                       3677.03   7523.29</span></span>
<span><span class="co">#&gt; dcost_tox                      3846.26      0.00</span></span>
<span><span class="co">#&gt; cost_tox_cycle_l                  0.20      0.19</span></span>
<span><span class="co">#&gt; dcost_tox_cycle_l                 0.00      0.00</span></span>
<span><span class="co">#&gt; cost_tox_cycle_starttime          0.00      0.00</span></span>
<span><span class="co">#&gt; dcost_tox_cycle_starttime         0.00      0.00</span></span>
<span><span class="co">#&gt; cost_tox_max_cycles              34.36     33.60</span></span>
<span><span class="co">#&gt; dcost_tox_max_cycles             -0.76      0.00</span></span>
<span><span class="co">#&gt; cost_tox_undisc                3713.00   7598.00</span></span>
<span><span class="co">#&gt; dcost_tox_undisc               3885.00      0.00</span></span>
<span><span class="co">#&gt; n_tox                             2.01      4.01</span></span>
<span><span class="co">#&gt; dn_tox                            2.00      0.00</span></span>
<span><span class="co">#&gt; q_total                           6.41      8.35</span></span>
<span><span class="co">#&gt; dq_total                          1.94      0.00</span></span>
<span><span class="co">#&gt; q_total_undisc                    7.55      9.97</span></span>
<span><span class="co">#&gt; dq_total_undisc                   2.42      0.00</span></span></code></pre>
<table class="table table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
pat_id
</th>
<th style="text-align:left;">
arm
</th>
<th style="text-align:right;">
total_lys
</th>
<th style="text-align:right;">
total_qalys
</th>
<th style="text-align:right;">
total_costs
</th>
<th style="text-align:right;">
total_lys_undisc
</th>
<th style="text-align:right;">
total_qalys_undisc
</th>
<th style="text-align:right;">
total_costs_undisc
</th>
<th style="text-align:right;">
cost_advanced
</th>
<th style="text-align:right;">
cost_tox
</th>
<th style="text-align:right;">
cost_adj
</th>
<th style="text-align:right;">
cost_monitor
</th>
<th style="text-align:right;">
cost_tox_cycle_l
</th>
<th style="text-align:right;">
cost_adj_cycle_l
</th>
<th style="text-align:right;">
cost_monitor_cycle_l
</th>
<th style="text-align:right;">
cost_tox_cycle_starttime
</th>
<th style="text-align:right;">
cost_adj_cycle_starttime
</th>
<th style="text-align:right;">
cost_monitor_cycle_starttime
</th>
<th style="text-align:right;">
cost_tox_max_cycles
</th>
<th style="text-align:right;">
cost_adj_max_cycles
</th>
<th style="text-align:right;">
cost_monitor_max_cycles
</th>
<th style="text-align:right;">
q_total
</th>
<th style="text-align:right;">
cost_advanced_undisc
</th>
<th style="text-align:right;">
cost_tox_undisc
</th>
<th style="text-align:right;">
cost_adj_undisc
</th>
<th style="text-align:right;">
cost_monitor_undisc
</th>
<th style="text-align:right;">
nexttime
</th>
<th style="text-align:right;">
number_events
</th>
<th style="text-align:right;">
n_tox
</th>
<th style="text-align:right;">
simulation
</th>
<th style="text-align:right;">
sensitivity
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
one
</td>
<td style="text-align:right;">
8.91
</td>
<td style="text-align:right;">
7.04
</td>
<td style="text-align:right;">
59950
</td>
<td style="text-align:right;">
9.56
</td>
<td style="text-align:right;">
7.56
</td>
<td style="text-align:right;">
61000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5939
</td>
<td style="text-align:right;">
49495
</td>
<td style="text-align:right;">
4516
</td>
<td style="text-align:right;">
0.173
</td>
<td style="text-align:right;">
0.173
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2.27
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
7.04
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
6000
</td>
<td style="text-align:right;">
50000
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
19.75
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
two
</td>
<td style="text-align:right;">
8.91
</td>
<td style="text-align:right;">
7.04
</td>
<td style="text-align:right;">
160919
</td>
<td style="text-align:right;">
9.56
</td>
<td style="text-align:right;">
7.56
</td>
<td style="text-align:right;">
163000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
7919
</td>
<td style="text-align:right;">
148484
</td>
<td style="text-align:right;">
4516
</td>
<td style="text-align:right;">
0.173
</td>
<td style="text-align:right;">
0.173
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2.27
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
7.04
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
8000
</td>
<td style="text-align:right;">
150000
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
19.75
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
one
</td>
<td style="text-align:right;">
2.29
</td>
<td style="text-align:right;">
1.59
</td>
<td style="text-align:right;">
92181
</td>
<td style="text-align:right;">
2.33
</td>
<td style="text-align:right;">
1.62
</td>
<td style="text-align:right;">
95000
</td>
<td style="text-align:right;">
37751
</td>
<td style="text-align:right;">
3960
</td>
<td style="text-align:right;">
49495
</td>
<td style="text-align:right;">
975
</td>
<td style="text-align:right;">
0.231
</td>
<td style="text-align:right;">
0.231
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2.90
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
1.59
</td>
<td style="text-align:right;">
40000
</td>
<td style="text-align:right;">
4000
</td>
<td style="text-align:right;">
50000
</td>
<td style="text-align:right;">
1000
</td>
<td style="text-align:right;">
6.78
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
two
</td>
<td style="text-align:right;">
26.83
</td>
<td style="text-align:right;">
21.37
</td>
<td style="text-align:right;">
160919
</td>
<td style="text-align:right;">
34.25
</td>
<td style="text-align:right;">
27.31
</td>
<td style="text-align:right;">
163000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
7919
</td>
<td style="text-align:right;">
148484
</td>
<td style="text-align:right;">
4516
</td>
<td style="text-align:right;">
0.173
</td>
<td style="text-align:right;">
0.173
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2.27
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
21.37
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
8000
</td>
<td style="text-align:right;">
150000
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
69.13
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
one
</td>
<td style="text-align:right;">
3.63
</td>
<td style="text-align:right;">
2.52
</td>
<td style="text-align:right;">
90246
</td>
<td style="text-align:right;">
3.73
</td>
<td style="text-align:right;">
2.58
</td>
<td style="text-align:right;">
94000
</td>
<td style="text-align:right;">
36858
</td>
<td style="text-align:right;">
1980
</td>
<td style="text-align:right;">
49495
</td>
<td style="text-align:right;">
1913
</td>
<td style="text-align:right;">
0.231
</td>
<td style="text-align:right;">
0.231
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2.90
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
2.52
</td>
<td style="text-align:right;">
40000
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
50000
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
10.18
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
two
</td>
<td style="text-align:right;">
3.62
</td>
<td style="text-align:right;">
2.55
</td>
<td style="text-align:right;">
196715
</td>
<td style="text-align:right;">
3.73
</td>
<td style="text-align:right;">
2.62
</td>
<td style="text-align:right;">
202000
</td>
<td style="text-align:right;">
36419
</td>
<td style="text-align:right;">
9899
</td>
<td style="text-align:right;">
148484
</td>
<td style="text-align:right;">
1913
</td>
<td style="text-align:right;">
0.231
</td>
<td style="text-align:right;">
0.231
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2.90
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
2.55
</td>
<td style="text-align:right;">
40000
</td>
<td style="text-align:right;">
10000
</td>
<td style="text-align:right;">
150000
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
10.48
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
one
</td>
<td style="text-align:right;">
6.79
</td>
<td style="text-align:right;">
4.79
</td>
<td style="text-align:right;">
93146
</td>
<td style="text-align:right;">
7.16
</td>
<td style="text-align:right;">
5.04
</td>
<td style="text-align:right;">
100000
</td>
<td style="text-align:right;">
34029
</td>
<td style="text-align:right;">
5939
</td>
<td style="text-align:right;">
49495
</td>
<td style="text-align:right;">
3682
</td>
<td style="text-align:right;">
0.231
</td>
<td style="text-align:right;">
0.231
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2.90
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
4.79
</td>
<td style="text-align:right;">
40000
</td>
<td style="text-align:right;">
6000
</td>
<td style="text-align:right;">
50000
</td>
<td style="text-align:right;">
4000
</td>
<td style="text-align:right;">
19.08
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
two
</td>
<td style="text-align:right;">
6.86
</td>
<td style="text-align:right;">
4.95
</td>
<td style="text-align:right;">
192173
</td>
<td style="text-align:right;">
7.24
</td>
<td style="text-align:right;">
5.21
</td>
<td style="text-align:right;">
201000
</td>
<td style="text-align:right;">
33234
</td>
<td style="text-align:right;">
5939
</td>
<td style="text-align:right;">
148484
</td>
<td style="text-align:right;">
4516
</td>
<td style="text-align:right;">
0.231
</td>
<td style="text-align:right;">
0.231
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2.90
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
4.95
</td>
<td style="text-align:right;">
40000
</td>
<td style="text-align:right;">
6000
</td>
<td style="text-align:right;">
150000
</td>
<td style="text-align:right;">
5000
</td>
<td style="text-align:right;">
19.83
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
one
</td>
<td style="text-align:right;">
4.35
</td>
<td style="text-align:right;">
3.29
</td>
<td style="text-align:right;">
93391
</td>
<td style="text-align:right;">
4.50
</td>
<td style="text-align:right;">
3.40
</td>
<td style="text-align:right;">
100000
</td>
<td style="text-align:right;">
34275
</td>
<td style="text-align:right;">
5939
</td>
<td style="text-align:right;">
49495
</td>
<td style="text-align:right;">
3682
</td>
<td style="text-align:right;">
0.231
</td>
<td style="text-align:right;">
0.231
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2.90
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
3.29
</td>
<td style="text-align:right;">
40000
</td>
<td style="text-align:right;">
6000
</td>
<td style="text-align:right;">
50000
</td>
<td style="text-align:right;">
4000
</td>
<td style="text-align:right;">
13.57
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
two
</td>
<td style="text-align:right;">
4.78
</td>
<td style="text-align:right;">
3.65
</td>
<td style="text-align:right;">
193594
</td>
<td style="text-align:right;">
4.96
</td>
<td style="text-align:right;">
3.79
</td>
<td style="text-align:right;">
202000
</td>
<td style="text-align:right;">
33509
</td>
<td style="text-align:right;">
7919
</td>
<td style="text-align:right;">
148484
</td>
<td style="text-align:right;">
3682
</td>
<td style="text-align:right;">
0.231
</td>
<td style="text-align:right;">
0.231
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2.90
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
3.65
</td>
<td style="text-align:right;">
40000
</td>
<td style="text-align:right;">
8000
</td>
<td style="text-align:right;">
150000
</td>
<td style="text-align:right;">
4000
</td>
<td style="text-align:right;">
15.06
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
<p><img src="example_colon_degeling_files/figure-html/unnamed-chunk-2-1.png" width="700"><img src="example_colon_degeling_files/figure-html/unnamed-chunk-2-2.png" width="700"><img src="example_colon_degeling_files/figure-html/unnamed-chunk-2-3.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="probabilistic-case">Probabilistic Case<a class="anchor" aria-label="anchor" href="#probabilistic-case"></a>
</h2>
<p>We will now use the<code><a href="../reference/pick_val_v.html">pick_val_v()</a></code> function. We just
showcase this, and will not run it for the sake of saving computation
time.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">thetaToProb</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/unname.html" class="external-link">unname</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Uncertainty is only assumed on TTR, utility, toxicities, TTD and certain costs</span></span>
<span></span>
<span><span class="va">l_inputs</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>parameter_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"m_TTR"</span>,</span>
<span>                                      <span class="st">"u_adjuvant"</span>,</span>
<span>                                      <span class="st">"p_tox_1"</span>, </span>
<span>                                      <span class="st">"p_tox_2"</span>,</span>
<span>                                      <span class="st">"c_tox"</span>,</span>
<span>                                      <span class="st">"u_dis_tox"</span>,</span>
<span>                                      <span class="st">"u_diseasefree"</span>,</span>
<span>                                      <span class="st">"m_TTD"</span>,</span>
<span>                                      <span class="st">"c_advanced"</span>,</span>
<span>                                      <span class="st">"u_advanced"</span><span class="op">)</span>,</span>
<span>                 base_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_1_low_cure</span>,</span>
<span>                    <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_1_high_cure</span>,</span>
<span>                    <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_2_low_cure</span>,</span>
<span>                    <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_2_high_cure</span>,</span>
<span>                    <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_1_low_shape</span>,</span>
<span>                    <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_1_high_shape</span>,</span>
<span>                    <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_2_low_shape</span>,</span>
<span>                    <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_2_high_shape</span>,</span>
<span>                    <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_1_low_scale</span>,</span>
<span>                    <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_1_high_scale</span>,</span>
<span>                    <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_2_low_scale</span>,</span>
<span>                    <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_R_2_high_scale</span><span class="op">)</span>,</span>
<span>                    <span class="fl">0.7</span>,</span>
<span>                    <span class="fl">0.2</span>,</span>
<span>                    <span class="fl">0.4</span>,</span>
<span>                    <span class="fl">2000</span>,</span>
<span>                    <span class="fl">0.1</span>,</span>
<span>                    <span class="fl">0.8</span>,</span>
<span>                    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_R_D_1_shape</span>,</span>
<span>                    <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_R_D_2_shape</span>,</span>
<span>                    <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_R_D_1_scale</span>,</span>
<span>                    <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_R_D_2_scale</span><span class="op">)</span>,</span>
<span>                    <span class="fl">40000</span>,</span>
<span>                    <span class="fl">0.6</span><span class="op">)</span>,</span>
<span>                 PSA_dist <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"mvrnorm"</span>,</span>
<span>                                 <span class="st">"rlnorm"</span>,</span>
<span>                                 <span class="st">"rbeta"</span>,</span>
<span>                                 <span class="st">"rbeta"</span>,</span>
<span>                                 <span class="st">"rgamma"</span>,</span>
<span>                                 <span class="st">"rlnorm"</span>,</span>
<span>                                 <span class="st">"rlnorm"</span>,</span>
<span>                                 <span class="st">"mvrnorm"</span>,</span>
<span>                                 <span class="st">"rgamma"</span>,</span>
<span>                                 <span class="st">"rlnorm"</span><span class="op">)</span>,</span>
<span>                 a<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">fit_RF_R</span><span class="op">$</span><span class="va">coefficients</span>,</span>
<span>                        <span class="op">-</span><span class="fl">0.35738872</span>,</span>
<span>                        <span class="fl">0.1</span><span class="op">*</span><span class="fl">500</span>,</span>
<span>                        <span class="fl">0.2</span><span class="op">*</span><span class="fl">500</span>,<span class="fl">10000</span>,</span>
<span>                        <span class="op">-</span><span class="fl">2.30756026</span>,</span>
<span>                        <span class="op">-</span><span class="fl">0.2237682</span>,</span>
<span>                        <span class="va">fit_R_D</span><span class="op">$</span><span class="va">coefficients</span>,</span>
<span>                        <span class="fl">200000</span>,</span>
<span>                        <span class="op">-</span><span class="fl">0.51165826</span><span class="op">)</span>,</span>
<span>                 b<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">fit_RF_R</span><span class="op">$</span><span class="va">cov</span>,</span>
<span>                        <span class="fl">0.03778296</span>,</span>
<span>                        <span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="fl">0.1</span><span class="op">)</span><span class="op">*</span><span class="fl">500</span>,</span>
<span>                        <span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="fl">0.2</span><span class="op">)</span><span class="op">*</span><span class="fl">500</span>,</span>
<span>                        <span class="fl">5</span>,</span>
<span>                        <span class="fl">0.09975135</span>,</span>
<span>                        <span class="fl">0.0353443</span>,</span>
<span>                        <span class="va">fit_R_D</span><span class="op">$</span><span class="va">cov</span>,</span>
<span>                        <span class="fl">5</span>,<span class="fl">0.04080783</span><span class="op">)</span>,</span>
<span>                 n<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>                 psa_indicators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span></span>
<span>                 <span class="op">)</span></span>
<span></span>
<span><span class="va">common_all_inputs2</span> <span class="op">&lt;-</span><span class="fu"><a href="../reference/add_item.html">add_item</a></span><span class="op">(</span>input <span class="op">=</span> <span class="op">{</span></span>
<span> </span>
<span>                      <span class="va">drc</span>         <span class="op">&lt;-</span> <span class="fl">0.04</span> </span>
<span>                      <span class="va">drq</span>         <span class="op">&lt;-</span> <span class="fl">0.015</span></span>
<span>                      <span class="va">p_highrisk</span>  <span class="op">&lt;-</span> <span class="fl">0.6</span></span>
<span>                      </span>
<span>                      <span class="fu"><a href="../reference/pick_val_v.html">pick_val_v</a></span><span class="op">(</span></span>
<span>                        base<span class="op">=</span> <span class="va">l_inputs</span><span class="op">[[</span><span class="st">"base_value"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                        psa <span class="op">=</span> <span class="fu"><a href="../reference/pick_psa.html">pick_psa</a></span><span class="op">(</span></span>
<span>                            <span class="va">l_inputs</span><span class="op">[[</span><span class="st">"PSA_dist"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                            <span class="va">l_inputs</span><span class="op">[[</span><span class="st">"n"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                            <span class="va">l_inputs</span><span class="op">[[</span><span class="st">"a"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                            <span class="va">l_inputs</span><span class="op">[[</span><span class="st">"b"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>                        psa_ind     <span class="op">=</span> <span class="va">psa_bool</span>,</span>
<span>                        sens_ind    <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                        names_out   <span class="op">=</span> <span class="va">l_inputs</span><span class="op">[[</span><span class="st">"parameter_name"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                        indicator   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span>, </span>
<span>                        indicator_psa <span class="op">=</span> <span class="va">l_inputs</span><span class="op">[[</span><span class="st">"psa_indicators"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                        deploy_env <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>                      <span class="op">)</span> </span>
<span></span>
<span>                      </span>
<span>                      <span class="va">d_BS_shape</span> <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_D_shape</span></span>
<span>                      <span class="va">d_BS_rate</span>  <span class="op">&lt;-</span> <span class="va">df_survival_models</span><span class="op">$</span><span class="va">d_RF_D_rate</span></span>
<span>                      <span class="va">d_TTR_cure_1_low</span>  <span class="op">&lt;-</span> <span class="fu">thetaToProb</span><span class="op">(</span><span class="va">m_TTR</span><span class="op">[</span><span class="st">"theta"</span><span class="op">]</span><span class="op">)</span></span>
<span>                      <span class="va">d_TTR_cure_1_high</span> <span class="op">&lt;-</span> <span class="fu">thetaToProb</span><span class="op">(</span><span class="va">m_TTR</span><span class="op">[</span><span class="st">"theta"</span><span class="op">]</span><span class="op">+</span> <span class="va">m_TTR</span><span class="op">[</span><span class="st">"node4"</span><span class="op">]</span><span class="op">)</span></span>
<span>                      <span class="va">d_TTR_cure_2_low</span>  <span class="op">&lt;-</span> <span class="fu">thetaToProb</span><span class="op">(</span><span class="va">m_TTR</span><span class="op">[</span><span class="st">"theta"</span><span class="op">]</span><span class="op">+</span> <span class="va">m_TTR</span><span class="op">[</span><span class="st">"rxLev+5FU"</span><span class="op">]</span><span class="op">)</span></span>
<span>                      <span class="va">d_TTR_cure_2_high</span> <span class="op">&lt;-</span> <span class="fu">thetaToProb</span><span class="op">(</span><span class="va">m_TTR</span><span class="op">[</span><span class="st">"theta"</span><span class="op">]</span><span class="op">+</span> <span class="va">m_TTR</span><span class="op">[</span><span class="st">"rxLev+5FU"</span><span class="op">]</span> <span class="op">+</span> <span class="va">m_TTR</span><span class="op">[</span><span class="st">"node4"</span><span class="op">]</span><span class="op">)</span></span>
<span>                      <span class="va">d_TTR_shape_1_low</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">m_TTR</span><span class="op">[</span><span class="st">"shape"</span><span class="op">]</span><span class="op">)</span></span>
<span>                      <span class="va">d_TTR_shape_1_high</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">m_TTR</span><span class="op">[</span><span class="st">"shape"</span><span class="op">]</span><span class="op">)</span></span>
<span>                      <span class="va">d_TTR_shape_2_low</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">m_TTR</span><span class="op">[</span><span class="st">"shape"</span><span class="op">]</span><span class="op">)</span></span>
<span>                      <span class="va">d_TTR_shape_2_high</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">m_TTR</span><span class="op">[</span><span class="st">"shape"</span><span class="op">]</span><span class="op">)</span></span>
<span>                      <span class="va">d_TTR_scale_1_low</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">m_TTR</span><span class="op">[</span><span class="st">"scale"</span><span class="op">]</span><span class="op">)</span></span>
<span>                      <span class="va">d_TTR_scale_1_high</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">m_TTR</span><span class="op">[</span><span class="st">"scale"</span><span class="op">]</span><span class="op">+</span> <span class="va">m_TTR</span><span class="op">[</span><span class="st">"scale(node4)"</span><span class="op">]</span><span class="op">)</span></span>
<span>                      <span class="va">d_TTR_scale_2_low</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">m_TTR</span><span class="op">[</span><span class="st">"scale"</span><span class="op">]</span><span class="op">+</span> <span class="va">m_TTR</span><span class="op">[</span><span class="st">"scale(rxLev+5FU)"</span><span class="op">]</span><span class="op">)</span></span>
<span>                      <span class="va">d_TTR_scale_2_high</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">m_TTR</span><span class="op">[</span><span class="st">"scale"</span><span class="op">]</span><span class="op">+</span> <span class="va">m_TTR</span><span class="op">[</span><span class="st">"scale(rxLev+5FU)"</span><span class="op">]</span> <span class="op">+</span> <span class="va">m_TTR</span><span class="op">[</span><span class="st">"scale(node4)"</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span>                      <span class="co"># Adjuvant treatment costs</span></span>
<span>                      <span class="va">c_adjuvant_cycle_1</span> <span class="op">&lt;-</span> <span class="fl">5000</span></span>
<span>                      <span class="va">c_adjuvant_cycle_2</span> <span class="op">&lt;-</span> <span class="fl">15000</span></span>
<span>                      </span>
<span>                      <span class="co"># Other adjuvant treatment parameters</span></span>
<span>                      <span class="va">t_adjuvant_cycle</span>      <span class="op">&lt;-</span> <span class="fl">3</span><span class="op">/</span><span class="fl">52</span> <span class="co"># in years</span></span>
<span>                      <span class="va">n_max_adjuvant_cycles</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span>                      </span>
<span>                     </span>
<span>                      <span class="co">## DISEASE MONITORING</span></span>
<span>                      </span>
<span>                      <span class="co"># Cost of a monitoring cycle</span></span>
<span>                      <span class="va">c_monitor</span> <span class="op">&lt;-</span> <span class="fl">1000</span></span>
<span>                      </span>
<span>                      <span class="co"># Other disease monitoring parameters</span></span>
<span>                      <span class="va">t_monitor_cycle</span>      <span class="op">&lt;-</span> <span class="fl">1</span> <span class="co"># in years</span></span>
<span>                      <span class="va">n_max_monitor_cycles</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span>                      </span>
<span>                      </span>
<span>                      <span class="co">## RECURRENCE OF DISEASE</span></span>
<span>                      </span>
<span>                      <span class="co"># Log-logistic distribution for the time-to-death due to cancer after recurrence                    (TTD)</span></span>
<span>                      <span class="co"># - conditional on treatment arm</span></span>
<span>                      <span class="va">d_TTD_shape_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">m_TTD</span><span class="op">[</span><span class="st">"shape"</span><span class="op">]</span><span class="op">)</span></span>
<span>                      <span class="va">d_TTD_shape_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">m_TTD</span><span class="op">[</span><span class="st">"shape"</span><span class="op">]</span> <span class="op">+</span> <span class="va">m_TTD</span><span class="op">[</span><span class="st">"shape(rxLev+5FU)"</span><span class="op">]</span><span class="op">)</span></span>
<span>                      </span>
<span>                      <span class="va">d_TTD_scale_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">m_TTD</span><span class="op">[</span><span class="st">"scale"</span><span class="op">]</span><span class="op">)</span></span>
<span>                      <span class="va">d_TTD_scale_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">m_TTD</span><span class="op">[</span><span class="st">"scale"</span><span class="op">]</span> <span class="op">+</span> <span class="va">m_TTD</span><span class="op">[</span><span class="st">"rxLev+5FU"</span><span class="op">]</span><span class="op">)</span></span>
<span>                     </span>
<span></span>
<span><span class="op">}</span><span class="op">)</span>  </span>
<span></span>
<span><span class="va">results_psa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_sim_parallel.html">run_sim_parallel</a></span><span class="op">(</span>  </span>
<span>  npats<span class="op">=</span><span class="fl">1000</span>,                               <span class="co"># number of patients to be simulated</span></span>
<span>  n_sim<span class="op">=</span><span class="fl">5</span>,                                  <span class="co"># number of simulations to run</span></span>
<span>  psa_bool <span class="op">=</span> <span class="cn">TRUE</span>,                         <span class="co"># use PSA or not. If n_sim &gt; 1 and psa_bool = FALSE, then difference in outcomes is due to sampling (number of pats simulated)  </span></span>
<span>  arm_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"one"</span>, <span class="st">"two"</span><span class="op">)</span>,             <span class="co"># intervention list</span></span>
<span>  common_all_inputs <span class="op">=</span> <span class="va">common_all_inputs2</span>,    <span class="co"># inputs common that do not change within a simulation</span></span>
<span>  common_pt_inputs <span class="op">=</span> <span class="va">common_pt_inputs</span>,      <span class="co"># inputs that change within a simulation but are not affected by the intervention</span></span>
<span>  unique_pt_inputs <span class="op">=</span> <span class="va">unique_pt_inputs2</span>,</span>
<span>  init_event_list <span class="op">=</span> <span class="va">init_event_list</span>,        <span class="co"># initial event list</span></span>
<span>  evt_react_list <span class="op">=</span> <span class="va">evt_react_list</span>,          <span class="co"># reaction of events</span></span>
<span>  util_ongoing_list <span class="op">=</span> <span class="va">util_ongoing</span>,</span>
<span>  cost_instant_list <span class="op">=</span> <span class="va">cost_instant</span>,</span>
<span>  cost_cycle_list <span class="op">=</span> <span class="va">cost_cycle</span>,</span>
<span>  ipd <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  ncores <span class="op">=</span> <span class="fl">1</span> <span class="co">#for github pages to work, could be set to min(future::availableCores(omit=1),4)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Analysis number: 1</span></span>
<span><span class="co">#&gt; Simulation number: 1</span></span>
<span><span class="co">#&gt; Data aggregated across events and patients by selecting the last value for input_out numeric items and then averaging across patients. Only last value of non-numeric and length &gt; 1 items in simulation is displayed.</span></span>
<span><span class="co">#&gt; Simulation number: 2</span></span>
<span><span class="co">#&gt; Simulation number: 3</span></span>
<span><span class="co">#&gt; Simulation number: 4</span></span>
<span><span class="co">#&gt; Simulation number: 5</span></span>
<span><span class="co">#&gt; Time to run analysis 1: 7.37s</span></span>
<span><span class="co">#&gt; Total time to run: 7.37s</span></span>
<span><span class="co">#&gt; Simulation finalized;</span></span>
<span>  </span>
<span><span class="fu"><a href="../reference/summary_results_sim.html">summary_results_sim</a></span><span class="op">(</span><span class="va">results_psa</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, arm <span class="op">=</span><span class="st">"two"</span><span class="op">)</span> </span>
<span><span class="co">#&gt;                                                    one</span></span>
<span><span class="co">#&gt; costs                          75,121 (72,414; 76,651)</span></span>
<span><span class="co">#&gt; dcosts                         91,912 (88,244; 94,067)</span></span>
<span><span class="co">#&gt; lys                                  8.48 (7.56; 9.24)</span></span>
<span><span class="co">#&gt; dlys                                 2.21 (1.22; 3.71)</span></span>
<span><span class="co">#&gt; qalys                                6.53 (5.69; 7.19)</span></span>
<span><span class="co">#&gt; dqalys                               1.83 (1.02; 2.99)</span></span>
<span><span class="co">#&gt; ICER                           47,479 (23,800; 76,118)</span></span>
<span><span class="co">#&gt; ICUR                           57,357 (29,520; 91,432)</span></span>
<span><span class="co">#&gt; INMB                            -627 (-42,131; 61,219)</span></span>
<span><span class="co">#&gt; costs_undisc                   77,307 (74,294; 79,044)</span></span>
<span><span class="co">#&gt; dcosts_undisc                  92,706 (88,603; 95,129)</span></span>
<span><span class="co">#&gt; lys_undisc                            9.95 (8.8; 10.9)</span></span>
<span><span class="co">#&gt; dlys_undisc                          2.78 (1.54; 4.67)</span></span>
<span><span class="co">#&gt; qalys_undisc                         7.69 (6.65; 8.52)</span></span>
<span><span class="co">#&gt; dqalys_undisc                        2.28 (1.27; 3.75)</span></span>
<span><span class="co">#&gt; ICER_undisc                    38,237 (18,992; 60,960)</span></span>
<span><span class="co">#&gt; ICUR_undisc                    46,393 (23,640; 73,647)</span></span>
<span><span class="co">#&gt; INMB_undisc                   21,250 (-30,159; 98,795)</span></span>
<span><span class="co">#&gt; cost_adj                       46,079 (45,526; 46,724)</span></span>
<span><span class="co">#&gt; dcost_adj                      95,023 (93,947; 96,982)</span></span>
<span><span class="co">#&gt; cost_adj_cycle_l                       0.2 (0.19; 0.2)</span></span>
<span><span class="co">#&gt; dcost_adj_cycle_l              -0.004 (-0.011; -0.001)</span></span>
<span><span class="co">#&gt; cost_adj_cycle_starttime                      0 (0; 0)</span></span>
<span><span class="co">#&gt; dcost_adj_cycle_starttime                     0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_adj_max_cycles                  34.4 (33.6; 34.9)</span></span>
<span><span class="co">#&gt; dcost_adj_max_cycles             -0.778 (-1.83; -0.26)</span></span>
<span><span class="co">#&gt; cost_adj_undisc                46,531 (45,970; 47,185)</span></span>
<span><span class="co">#&gt; dcost_adj_undisc               95,972 (94,880; 97,960)</span></span>
<span><span class="co">#&gt; cost_advanced                  24,760 (22,591; 26,587)</span></span>
<span><span class="co">#&gt; dcost_advanced                 -5,292 (-8,788; -3,248)</span></span>
<span><span class="co">#&gt; cost_advanced_undisc           26,269 (23,788; 28,322)</span></span>
<span><span class="co">#&gt; dcost_advanced_undisc          -5,523 (-9,481; -3,284)</span></span>
<span><span class="co">#&gt; cost_monitor                      2,271 (2,149; 2,368)</span></span>
<span><span class="co">#&gt; dcost_monitor                           496 (324; 710)</span></span>
<span><span class="co">#&gt; cost_monitor_cycle_l                 3.44 (3.36; 3.48)</span></span>
<span><span class="co">#&gt; dcost_monitor_cycle_l          -0.078 (-0.183; -0.026)</span></span>
<span><span class="co">#&gt; cost_monitor_cycle_starttime         2.71 (2.67; 2.74)</span></span>
<span><span class="co">#&gt; dcost_monitor_cycle_starttime  -0.094 (-0.156; -0.057)</span></span>
<span><span class="co">#&gt; cost_monitor_max_cycles              17.2 (16.8; 17.4)</span></span>
<span><span class="co">#&gt; dcost_monitor_max_cycles        -0.389 (-0.915; -0.13)</span></span>
<span><span class="co">#&gt; cost_monitor_undisc               2,475 (2,337; 2,588)</span></span>
<span><span class="co">#&gt; dcost_monitor_undisc                    556 (360; 801)</span></span>
<span><span class="co">#&gt; cost_tox                          2,012 (1,764; 2,252)</span></span>
<span><span class="co">#&gt; dcost_tox                         1,685 (1,406; 2,013)</span></span>
<span><span class="co">#&gt; cost_tox_cycle_l                       0.2 (0.19; 0.2)</span></span>
<span><span class="co">#&gt; dcost_tox_cycle_l              -0.004 (-0.011; -0.001)</span></span>
<span><span class="co">#&gt; cost_tox_cycle_starttime                      0 (0; 0)</span></span>
<span><span class="co">#&gt; dcost_tox_cycle_starttime                     0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_tox_max_cycles                  34.4 (33.6; 34.9)</span></span>
<span><span class="co">#&gt; dcost_tox_max_cycles             -0.778 (-1.83; -0.26)</span></span>
<span><span class="co">#&gt; cost_tox_undisc                   2,032 (1,782; 2,274)</span></span>
<span><span class="co">#&gt; dcost_tox_undisc                  1,702 (1,420; 2,033)</span></span>
<span><span class="co">#&gt; q_total                              6.53 (5.69; 7.19)</span></span>
<span><span class="co">#&gt; dq_total                             1.83 (1.02; 2.99)</span></span>
<span><span class="co">#&gt; q_total_undisc                       7.69 (6.65; 8.52)</span></span>
<span><span class="co">#&gt; dq_total_undisc                      2.28 (1.27; 3.75)</span></span>
<span><span class="co">#&gt;                                                      two</span></span>
<span><span class="co">#&gt; costs                         167,033 (164,895; 169,735)</span></span>
<span><span class="co">#&gt; dcosts                                          0 (0; 0)</span></span>
<span><span class="co">#&gt; lys                                    10.7 (10.1; 11.3)</span></span>
<span><span class="co">#&gt; dlys                                            0 (0; 0)</span></span>
<span><span class="co">#&gt; qalys                                  8.35 (7.96; 8.74)</span></span>
<span><span class="co">#&gt; dqalys                                          0 (0; 0)</span></span>
<span><span class="co">#&gt; ICER                                        NaN (NA; NA)</span></span>
<span><span class="co">#&gt; ICUR                                        NaN (NA; NA)</span></span>
<span><span class="co">#&gt; INMB                                        NaN (NA; NA)</span></span>
<span><span class="co">#&gt; costs_undisc                  170,013 (167,647; 172,918)</span></span>
<span><span class="co">#&gt; dcosts_undisc                                   0 (0; 0)</span></span>
<span><span class="co">#&gt; lys_undisc                             12.7 (11.9; 13.5)</span></span>
<span><span class="co">#&gt; dlys_undisc                                     0 (0; 0)</span></span>
<span><span class="co">#&gt; qalys_undisc                           9.96 (9.47; 10.4)</span></span>
<span><span class="co">#&gt; dqalys_undisc                                   0 (0; 0)</span></span>
<span><span class="co">#&gt; ICER_undisc                                 NaN (NA; NA)</span></span>
<span><span class="co">#&gt; ICUR_undisc                                 NaN (NA; NA)</span></span>
<span><span class="co">#&gt; INMB_undisc                                 NaN (NA; NA)</span></span>
<span><span class="co">#&gt; cost_adj                      141,102 (139,724; 143,435)</span></span>
<span><span class="co">#&gt; dcost_adj                                       0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_adj_cycle_l                        0.19 (0.19; 0.2)</span></span>
<span><span class="co">#&gt; dcost_adj_cycle_l                               0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_adj_cycle_starttime                        0 (0; 0)</span></span>
<span><span class="co">#&gt; dcost_adj_cycle_starttime                       0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_adj_max_cycles                      33.6 (33; 34.2)</span></span>
<span><span class="co">#&gt; dcost_adj_max_cycles                            0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_adj_undisc               142,503 (141,105; 144,870)</span></span>
<span><span class="co">#&gt; dcost_adj_undisc                                0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_advanced                    19,468 (17,798; 21,064)</span></span>
<span><span class="co">#&gt; dcost_advanced                                  0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_advanced_undisc             20,746 (18,841; 22,543)</span></span>
<span><span class="co">#&gt; dcost_advanced_undisc                           0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_monitor                        2,767 (2,687; 2,870)</span></span>
<span><span class="co">#&gt; dcost_monitor                                   0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_monitor_cycle_l                    3.36 (3.3; 3.42)</span></span>
<span><span class="co">#&gt; dcost_monitor_cycle_l                           0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_monitor_cycle_starttime           2.61 (2.58; 2.64)</span></span>
<span><span class="co">#&gt; dcost_monitor_cycle_starttime                   0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_monitor_max_cycles                16.8 (16.5; 17.1)</span></span>
<span><span class="co">#&gt; dcost_monitor_max_cycles                        0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_monitor_undisc                 3,030 (2,937; 3,141)</span></span>
<span><span class="co">#&gt; dcost_monitor_undisc                            0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_tox                            3,697 (3,582; 4,013)</span></span>
<span><span class="co">#&gt; dcost_tox                                       0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_tox_cycle_l                        0.19 (0.19; 0.2)</span></span>
<span><span class="co">#&gt; dcost_tox_cycle_l                               0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_tox_cycle_starttime                        0 (0; 0)</span></span>
<span><span class="co">#&gt; dcost_tox_cycle_starttime                       0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_tox_max_cycles                      33.6 (33; 34.2)</span></span>
<span><span class="co">#&gt; dcost_tox_max_cycles                            0 (0; 0)</span></span>
<span><span class="co">#&gt; cost_tox_undisc                     3,733 (3,618; 4,053)</span></span>
<span><span class="co">#&gt; dcost_tox_undisc                                0 (0; 0)</span></span>
<span><span class="co">#&gt; q_total                                8.35 (7.96; 8.74)</span></span>
<span><span class="co">#&gt; dq_total                                        0 (0; 0)</span></span>
<span><span class="co">#&gt; q_total_undisc                         9.96 (9.47; 10.4)</span></span>
<span><span class="co">#&gt; dq_total_undisc                                 0 (0; 0)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Javier Sanchez Alvarez.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
